<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>Category: 硬件开发 - Hexo</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Hexo"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Hexo"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Hexo"><meta property="og:url" content="http://example.com/"><meta property="og:site_name" content="Hexo"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://example.com/img/og_image.png"><meta property="article:author" content="John Doe"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://example.com/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com"},"headline":"Hexo","image":["http://example.com/img/og_image.png"],"author":{"@type":"Person","name":"John Doe"},"publisher":{"@type":"Organization","name":"Hexo","logo":{"@type":"ImageObject","url":"http://example.com/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Hexo" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories/">Categories</a></li><li><a href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/">张腾跃</a></li><li><a href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></li><li class="is-active"><a href="#" aria-current="page">硬件开发</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2025-01-15T07:52:14.000Z" title="2025/1/15 15:52:14">2025-01-15</time></span><span class="level-item">Updated&nbsp;<time dateTime="2025-01-15T07:56:13.993Z" title="2025/1/15 15:56:13">2025-01-15</time></span><span class="level-item"><a class="link-muted" href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/">张腾跃</a><span> / </span><a class="link-muted" href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><span> / </span><a class="link-muted" href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%A1%AC%E4%BB%B6%E5%BC%80%E5%8F%91/">硬件开发</a></span><span class="level-item">an hour read (About 11083 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/01/15/OLED-IIC/">OLED-IIC</a></p><div class="content"><h1 id="往期内容"><a href="#往期内容" class="headerlink" title="往期内容"></a>往期内容</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_72614426/article/details/140810526?spm=1001.2014.3001.5502">STM32F1基于HAL库的学习记录实用使用教程分享(一、GPIO_Output)</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_72614426/article/details/140892352?spm=1001.2014.3001.5502">STM32F1基于HAL库的学习记录实用使用教程分享(二、GPIO_Input 按键)</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_72614426/article/details/140892352?spm=1001.2014.3001.5502">STM32F1基于HAL库的学习记录实用使用教程分享(三、外部中断 按键)</a></p>
<hr>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><code>本文记录了通过使用STM32F103ZET6单片机进行OLED_IIC的学习</code></p>
<p>随着嵌入式行业的兴起，于此记录个人的一些学习过程并进行分享，本次是单片机控制里很重要的一个通信协议：<strong>IIC</strong></p>
<hr>
<p><code>声明：本文章在编写过程中，我始终致力于尊重并保护所有原创内容及其知识产权。然而，由于信息来源的多样性和复杂性，可能存在个别内容未明确标注出处、存在事实性错误或无意中侵犯了他人的知识产权的情况。对于任何可能存在的上述问题，我深感歉意，并在此提前向受影响的作者表示最诚挚的歉意。我始终秉持着尊重原创、维护知识产权的原则，绝无意侵犯任何人的合法权益。一旦收到您的反馈，我将立即核实并在第一时间内对文章进行修改。这包括但不限于补充相关引用信息、更正错误内容或删除涉嫌侵权的内容。再次感谢您的关注与支持，期待与您共同营造一个更加美好的知识共享空间。新手文章诸多不足，还望海涵。</code></p>
<h1 id="一、IIC"><a href="#一、IIC" class="headerlink" title="一、IIC"></a>一、IIC</h1><p><strong>IIC</strong>（Inter-Integrated Circuit，集成电路间总线）是一种同步的多主机通信总线，广泛用于连接微控制器与其他设备，如传感器、存储器等。IIC总线支持多个主设备和从设备之间的通信，可以在软件和硬件层面上进行。这两者之间的主要区别在于实现方式和控制机制。</p>
<p><strong>硬件IIC</strong></p>
<p>专用硬件支持：硬件 IIC 由微控制器或其他设备内部的专用硬件模块实现，包括 IIC 总线控制器和物理层接口。这种设计使得 IIC 通信更为高效，能够直接处理信号的发送和接收。</p>
<p>自动控制：硬件 IIC 模块能够自动管理 IIC 协议的所有细节，包括起始条件、地址传输、数据传输和应答信号等。这种自动化处理减少了微控制器的负担，使其能将更多的资源用于其他任务。</p>
<p>高效性：由于硬件 IIC 模块在独立的硬件层面上运作，因此其数据传输效率通常高于软件 IIC。硬件 IIC 能在执行通信时，同时并行处理其他操作，从而提高系统整体性能。</p>
<p>资源占用：虽然硬件 IIC 提高了通信效率，但也可能会占用更多的硬件资源，如 GPIO 引脚 和 内部寄存器。这意味着在设计电路时需要考虑资源的合理配置。</p>
<p>灵活性：硬件 IIC 的灵活性相对较低，其功能和特性由硬件电路设计决定，调整和改动的可能性有限。相比之下，软件 IIC 更具灵活性，可以根据需要进行编程和修改。</p>
<p>适用场景：硬件 IIC 非常适合于对 实时性 和 性能 要求较高的应用，尤其是在需要频繁进行数据传输的情况下。而软件 IIC 则更适合于对硬件资源要求较少和灵活性较高的场合，例如在开发测试阶段或快速原型设计时。</p>
<p><strong>软件IIC</strong><br>软件实现：软件 IIC 不依赖于专用的硬件模块，而是通过软件编程来模拟 IIC 协议的所有操作。这使得它可以在没有专用硬件支持的系统上实现 IIC 通信。</p>
<p>控制信号生成：软件 IIC 通过手动控制 GPIO 引脚 来生成 IIC 总线上的时钟信号（SCL）和数据线信号（SDA）。这种方式的灵活性使得用户能够准确调整信号的启动和传输过程。</p>
<p>效率：由于软件 IIC 需要 CPU 时间来生成和处理 IIC 信号，其效率通常低于硬件 IIC。在高频次传输的应用中，软件 IIC 可能成为性能瓶颈。</p>
<p>资源占用：相较于硬件 IIC，软件 IIC 占用的硬件资源更少，仅需几个 GPIO 引脚 来支持基本的通信。这使得软件 IIC 成为资源受限环境中的良好选择。</p>
<p>灵活性：软件 IIC 具有高度的灵活性，能够根据需要调整时序和协议细节，特别适合在没有硬件 IIC 模块的设备上或需要特定定制的应用场景。开发者可以轻松地修改代码来满足特定需求。</p>
<p>适用场景：软件 IIC 特别适用于快速原型开发、测试或小规模系统，并在实施定制通信协议或实验性功能时表现出色。它为灵活的设计和修改提供了便利，尤其在开发过程中需要频繁调整的情况下尤为有效。</p>
<h2 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h2><p>IIC（Inter-Integrated Circuit）总线是一种由 NXP（原 PHILIPS）公司开发的两线式串行通信协议。这种总线主要用于连接微控制器与其外围设备，广泛应用于主控制器与从器件之间的主从通信。</p>
<p><strong>其特征包括：</strong></p>
<p>两线制设计：IIC 总线仅使用两根信号线——数据线（SDA）和时钟线（SCL），简化了连接和布线。</p>
<p>主从通信：在 IIC 总线上，通信是以主从架构进行的，任意时刻只能有一个主机向多个从器件发送命令。因此，主机负责控制通信过程，而从器件执行接收和响应。</p>
<p>短距离传输：IIC 总线主要适用于小数据量的场合，传输距离相对较短，通常不超过几米。这使得它特别适合于PCB（印刷电路板）内的设备互联。</p>
<p>最高速度：高速 IIC 总线的传输速率可达 400 kbps，适合于需要快速数据传输的应用。在某些情况下，IIC 的速率甚至可以提升至 1 Mbps，满足更高性能的需求。</p>
<p>双向通信：IIC 总线支持在 CPU 与被控 IC 之间、IC 与 IC 之间的双向数据传输。这种双向能力使得设备之间可以轻松地交换信息。</p>
<p><strong>应用场景</strong><br>IIC 总线被广泛应用于各种项目和产品，包括但不限于：</p>
<p>传感器：用于与各种传感器或执行器的连接，如温度传感器、气体传感器、显示器等。<br>嵌入式系统：在微控制器与外围设备之间建立有效的通信链路。<br>消费电子：如智能家居、便携式设备等领域，提供高效的数据传输解决方案。</p>
<h2 id="2-IIC作用"><a href="#2-IIC作用" class="headerlink" title="2.IIC作用"></a>2.IIC作用</h2><p>一般来讲，中断有三个作用：<br><strong>实时控制</strong>：当温度较高时，自动开启空调功能。<br><strong>故障处理</strong>：出现错误时及时修正。<br><strong>数据传输</strong>：串口或其他通信方式进行数据的传输</p>
<h2 id="3-IIC的特点"><a href="#3-IIC的特点" class="headerlink" title="3.IIC的特点"></a>3.IIC的特点</h2><h3 id="IIC初始化与信号"><a href="#IIC初始化与信号" class="headerlink" title="IIC初始化与信号"></a>IIC初始化与信号</h3><ol>
<li><p>初始化<br>在 IIC 总线的初始化阶段，SCL（时钟线）和 SDA（数据线）均应保持在高电平状态。这一状态表示总线处于空闲等待状态，准备进行后续的通信。</p>
</li>
<li><p>开始信号<br>开始信号的生成步骤如下：</p>
<p>保持 SCL 高电平：在发送开始信号前，确保时钟线 SCL 维持在高电平状态。</p>
</li>
</ol>
<p>SDA 由高变低：在 SCL 处于高电平时，数据线 SDA 必须从高电平转为低电平。<br>拉低 SCL：最后，将 SCL 线拉低，完成开始信号的发送。此时，设备进入数据传输状态。</p>
<ol start="3">
<li><p>停止信号<br>停止信号的生成步骤如下：</p>
<p>拉高 SCL：首先将 SCL 线拉高，确保与总线通信的同步。</p>
</li>
</ol>
<p>SDA 由低变高：在 SCL 高电平时，数据线 SDA 从低电平变为高电平。<br>这一过程标志着数据传输的结束，设备重新回到空闲状态。</p>
<h3 id="IIC-总线的优缺点"><a href="#IIC-总线的优缺点" class="headerlink" title="IIC 总线的优缺点"></a>IIC 总线的优缺点</h3><p><strong>优点</strong></p>
<p>硬件资源节约：由于只使用两条线，IIC 总线在连接和电路设计上显著降低了硬件资源的占用。</p>
<p>协议设计精巧：IIC 协议结构简单，易于理解和实现，使其成为开发者的优先选择。</p>
<p>易用性强：由于其简单的架构和广泛的应用场景，IIC 总线具有较高的易用性。</p>
<p>适用性广泛：广泛应用于传输命令、数据采集等场景，具有良好的互操作性，便于移植到不同的平台和设备。</p>
<p><strong>缺点</strong></p>
<p>传输速率较慢：相比于其他总线协议（如 SPI 和 UART）而言，IIC 总线的最大传输速率相对较低，这在需要高带宽数据传输的场合可能成为瓶颈。</p>
<h1 id="二、配置"><a href="#二、配置" class="headerlink" title="二、配置"></a>二、配置</h1><p>在选择好芯片并进入配置界面后的操作如下进行</p>
<h2 id="1-RCC"><a href="#1-RCC" class="headerlink" title="1.RCC"></a>1.RCC</h2><h2 id="2-SYS"><a href="#2-SYS" class="headerlink" title="2.SYS"></a>2.SYS</h2><h2 id="3-时钟树"><a href="#3-时钟树" class="headerlink" title="3.时钟树"></a>3.时钟树</h2><p>以上三个部分再前三期文章中都已赘述过，而且也很基础，故在从今以后的文章中都会省略，有需要的同学可翻阅往期文章查阅。<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_72614426/article/details/140810526">STM32F1基于HAL库的学习记录实用使用教程分享(一、GPIO_Output)</a></p>
<h2 id="4-引脚配置"><a href="#4-引脚配置" class="headerlink" title="4.引脚配置"></a>4.引脚配置</h2><h3 id="软件IIC"><a href="#软件IIC" class="headerlink" title="软件IIC"></a>软件IIC</h3><h3 id="1-选择引脚和模式"><a href="#1-选择引脚和模式" class="headerlink" title="(1).选择引脚和模式"></a>(1).选择引脚和模式</h3><p>本文是基于第一篇文章的LED后进行的操作，有不了解的同学可以移步<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_72614426/article/details/140810526?spm=1001.2014.3001.5502">STM32F1基于HAL库的学习记录实用使用教程分享(一、GPIO_Output)</a>进行配置。<br>根据硬件点击所需要使用的引脚，之后在弹窗里选择<strong>GPIO_Output</strong>，如图2-1 ：</p>
<img src="/2025/01/15/OLED-IIC/2-1.png" class title="2-1.png">

<h3 id="2-进行细节配置"><a href="#2-进行细节配置" class="headerlink" title="(2).进行细节配置"></a>(2).进行细节配置</h3><p>在此</p>
<img src="/2025/01/15/OLED-IIC/2-2.png" class title="2-2.png">
<h3 id="硬件IIC"><a href="#硬件IIC" class="headerlink" title="硬件IIC"></a>硬件IIC</h3><h3 id="1-选择引脚和模式-1"><a href="#1-选择引脚和模式-1" class="headerlink" title="(1).选择引脚和模式"></a>(1).选择引脚和模式</h3><p>本文是基于第一篇文章的LED后进行的操作，有不了解的同学可以移步<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_72614426/article/details/140810526?spm=1001.2014.3001.5502">STM32F1基于HAL库的学习记录实用使用教程分享(一、GPIO_Output)</a>进行配置。<br>根据硬件点击所需要使用的引脚，之后在弹窗里选择<strong>IIC1_SCL</strong> <strong>IIC1_SDA</strong>，如图2-3 ：</p>
<img src="/2025/01/15/OLED-IIC/2-3.png" class title="2-3.png">


<h3 id="2-进行细节配置-1"><a href="#2-进行细节配置-1" class="headerlink" title="(2).进行细节配置"></a>(2).进行细节配置</h3><p>在此</p>
<img src="/2025/01/15/OLED-IIC/2-4.png" class title="2-4.png">

<h2 id="5-工程项目生成"><a href="#5-工程项目生成" class="headerlink" title="5.工程项目生成"></a>5.工程项目生成</h2><p>该部分在前面的文章中也多次提及，在此不再赘述。</p>
<h1 id="三、程序"><a href="#三、程序" class="headerlink" title="三、程序"></a>三、程序</h1><p><strong>sys.h、led.h、stm32f1xx_it.c和stm32f10x_it.h在我的第一篇博客</strong><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_72614426/article/details/140810526?spm=1001.2014.3001.5502">STM32F1基于HAL库的学习记录实用使用教程分享(一、GPIO_Output)</a><strong>里。</strong></p>
<h2 id="软件IIC-1"><a href="#软件IIC-1" class="headerlink" title="软件IIC"></a>软件IIC</h2><p>GPIOX代表目标引脚的端口号，例如GPIOG。<br>GPIO_Pin代表目标引脚的引脚号，例如GPIO_Pin_2。<br>在main.h中可找到宏定义：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Private defines -----------------------------------------------------------*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OLED_SCL_Pin GPIO_PIN_2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OLED_SCL_GPIO_Port GPIOG</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OLED_SDA_Pin GPIO_PIN_3</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OLED_SDA_GPIO_Port GPIOG</span></span><br></pre></td></tr></table></figure>
<p>定义数组</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">uint8_t</span> OledString[<span class="number">50</span>];                 <span class="comment">//OLED显示使用的字符串数组</span></span><br></pre></td></tr></table></figure>
<p>初始化并且在主函数循环内检测</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/* USER CODE BEGIN 2 */</span></span><br><span class="line">OLED_Init();</span><br><span class="line">OLED_Clear();</span><br><span class="line">OLED_Display_On();</span><br><span class="line"><span class="comment">/* USER CODE END 2 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Infinite loop */</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN WHILE */</span></span><br><span class="line"><span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">/* USER CODE END WHILE */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* USER CODE BEGIN 3 */</span></span><br><span class="line">OLED_ShowNum(<span class="number">1</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">1</span>);<span class="comment">//显示数字</span></span><br><span class="line"><span class="type">float</span> temp = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(temp=<span class="number">0</span>;temp&lt;<span class="number">10</span>;temp++)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">sprintf</span>((<span class="type">char</span> *)OledString,<span class="string">&quot;temp:%.2f&quot;</span>,temp);<span class="comment">//显示温度</span></span><br><span class="line">	OLED_ShowString(<span class="number">1</span>,<span class="number">2</span>,OledString,<span class="number">12</span>);	        <span class="comment">//显示在OLED上</span></span><br><span class="line">	HAL_Delay(<span class="number">200</span>);</span><br><span class="line">&#125;</span><br><span class="line">OLED_ShowCHinese(<span class="number">1</span>,<span class="number">6</span>,<span class="number">0</span>);	<span class="comment">//嵌</span></span><br><span class="line">      OLED_ShowCHinese(<span class="number">17</span>,<span class="number">6</span>,<span class="number">1</span>);	<span class="comment">//入</span></span><br><span class="line">OLED_ShowCHinese(<span class="number">33</span>,<span class="number">6</span>,<span class="number">2</span>);	<span class="comment">//式</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* USER CODE END 3 */</span></span><br></pre></td></tr></table></figure>
<p>以此实现OLED显示的功能。</p>
<p>下面是OLED的驱动函数</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////	 </span></span><br><span class="line"><span class="comment">//  oled.c</span></span><br><span class="line"><span class="comment">//  作者         : ZTY</span></span><br><span class="line"><span class="comment">//  创建日期     : 2024-05-16</span></span><br><span class="line"><span class="comment">//  说明         : 0.96寸 OLED 显示屏驱动程序 (STM32F103ZE，通过 IIC 接口)</span></span><br><span class="line"><span class="comment">//  接线说明     : </span></span><br><span class="line"><span class="comment">//              ----------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//              GND   接地</span></span><br><span class="line"><span class="comment">//              VCC   供电 5V 或 3.3V</span></span><br><span class="line"><span class="comment">//              SCL   时钟线连接 PG2 (SCL)</span></span><br><span class="line"><span class="comment">//              SDA   数据线连接 PG3 (SDA)            </span></span><br><span class="line"><span class="comment">//              ----------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;oled.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stdlib.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;oledfont.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// OLED 显示的操作函数定义</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动 IIC 通信</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">IIC_Start</span><span class="params">()</span> &#123;</span><br><span class="line">    OLED_SCLK_Set();   <span class="comment">// 设置时钟线为高</span></span><br><span class="line">    OLED_SDIN_Set();   <span class="comment">// 设置数据线为高</span></span><br><span class="line">    OLED_SDIN_Clr();   <span class="comment">// 将数据线拉低</span></span><br><span class="line">    OLED_SCLK_Clr();   <span class="comment">// 将时钟线拉低以准备发送数据</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 停止 IIC 通信</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">IIC_Stop</span><span class="params">()</span> &#123;</span><br><span class="line">    OLED_SCLK_Set();   <span class="comment">// 设置时钟线为高</span></span><br><span class="line">    OLED_SDIN_Clr();   <span class="comment">// 将数据线拉低</span></span><br><span class="line">    OLED_SDIN_Set();   <span class="comment">// 将数据线拉高以结束通信</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等待 IIC 回应</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">IIC_Wait_Ack</span><span class="params">()</span> &#123;</span><br><span class="line">    OLED_SCLK_Set();   <span class="comment">// 设置时钟线为高</span></span><br><span class="line">    OLED_SCLK_Clr();   <span class="comment">// 将时钟线拉低</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写入一个字节到 IIC</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Write_IIC_Byte</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> IIC_Byte)</span> &#123;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> i;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> m, da;</span><br><span class="line">    da = IIC_Byte;</span><br><span class="line">    OLED_SCLK_Clr();   <span class="comment">// 开始时将时钟线拉低</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123; <span class="comment">// 逐位输出字节</span></span><br><span class="line">        m = da;</span><br><span class="line">        m = m &amp; <span class="number">0x80</span>; <span class="comment">// 取出最高位</span></span><br><span class="line">        <span class="keyword">if</span> (m == <span class="number">0x80</span>) &#123;</span><br><span class="line">            OLED_SDIN_Set(); <span class="comment">// 发送 1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            OLED_SDIN_Clr(); <span class="comment">// 发送 0</span></span><br><span class="line">        &#125;</span><br><span class="line">        da = da &lt;&lt; <span class="number">1</span>; <span class="comment">// 左移数据</span></span><br><span class="line">        OLED_SCLK_Set(); <span class="comment">// 发送时钟信号</span></span><br><span class="line">        OLED_SCLK_Clr(); <span class="comment">// 拉低以准备下一位</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 发送命令到 OLED</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Write_IIC_Command</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> IIC_Command)</span> &#123;</span><br><span class="line">    IIC_Start();                       <span class="comment">// 启动 IIC</span></span><br><span class="line">    Write_IIC_Byte(<span class="number">0x78</span>);             <span class="comment">// 从设备地址</span></span><br><span class="line">    IIC_Wait_Ack();                   <span class="comment">// 等待设备应答</span></span><br><span class="line">    Write_IIC_Byte(<span class="number">0x00</span>);             <span class="comment">// 写入命令</span></span><br><span class="line">    IIC_Wait_Ack();                   <span class="comment">// 等待应答</span></span><br><span class="line">    Write_IIC_Byte(IIC_Command);      <span class="comment">// 发送命令字节</span></span><br><span class="line">    IIC_Wait_Ack();                   <span class="comment">// 等待应答</span></span><br><span class="line">    IIC_Stop();                       <span class="comment">// 停止 IIC</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 发送数据到 OLED</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Write_IIC_Data</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> IIC_Data)</span> &#123;</span><br><span class="line">    IIC_Start();                       <span class="comment">// 启动 IIC</span></span><br><span class="line">    Write_IIC_Byte(<span class="number">0x78</span>);             <span class="comment">// 从设备地址</span></span><br><span class="line">    IIC_Wait_Ack();                   <span class="comment">// 等待设备应答</span></span><br><span class="line">    Write_IIC_Byte(<span class="number">0x40</span>);             <span class="comment">// 写入数据</span></span><br><span class="line">    IIC_Wait_Ack();                   <span class="comment">// 等待应答</span></span><br><span class="line">    Write_IIC_Byte(IIC_Data);         <span class="comment">// 发送数据字节</span></span><br><span class="line">    IIC_Wait_Ack();                   <span class="comment">// 等待应答</span></span><br><span class="line">    IIC_Stop();                       <span class="comment">// 停止 IIC</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据数据和命令标识写入数据</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_WR_Byte</span><span class="params">(<span class="type">unsigned</span> dat, <span class="type">unsigned</span> cmd)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (cmd) &#123;</span><br><span class="line">        Write_IIC_Data(dat); <span class="comment">// 如果是数据</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Write_IIC_Command(dat); <span class="comment">// 如果是命令</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 填充整个画面</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">fill_picture</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> fill_Data)</span> &#123;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> m, n;</span><br><span class="line">    <span class="keyword">for</span> (m = <span class="number">0</span>; m &lt; <span class="number">8</span>; m++) &#123; <span class="comment">// OLED 有 8 页</span></span><br><span class="line">        OLED_WR_Byte(<span class="number">0xb0</span> + m, <span class="number">0</span>); <span class="comment">// 设置页地址</span></span><br><span class="line">        OLED_WR_Byte(<span class="number">0x00</span>, <span class="number">0</span>); <span class="comment">// 设置低列地址</span></span><br><span class="line">        OLED_WR_Byte(<span class="number">0x10</span>, <span class="number">0</span>); <span class="comment">// 设置高列地址</span></span><br><span class="line">        <span class="keyword">for</span> (n = <span class="number">0</span>; n &lt; <span class="number">128</span>; n++) &#123; <span class="comment">// 每页有 128 列</span></span><br><span class="line">            OLED_WR_Byte(fill_Data, <span class="number">1</span>); <span class="comment">// 填充数据</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 延时 50 毫秒</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Delay_50ms</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> Del_50ms)</span> &#123;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> m;</span><br><span class="line">    <span class="keyword">for</span> (; Del_50ms &gt; <span class="number">0</span>; Del_50ms--) &#123;</span><br><span class="line">        <span class="keyword">for</span> (m = <span class="number">6245</span>; m &gt; <span class="number">0</span>; m--); <span class="comment">// 根据系统时钟调整</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 延时 1 毫秒</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Delay_1ms</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> Del_1ms)</span> &#123;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> j;</span><br><span class="line">    <span class="keyword">while</span> (Del_1ms--) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">123</span>; j++); <span class="comment">// 根据系统时钟调整</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置 OLED 的显示位置</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Set_Pos</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> x, <span class="type">unsigned</span> <span class="type">char</span> y)</span> &#123;</span><br><span class="line">    OLED_WR_Byte(<span class="number">0xb0</span> + y, OLED_CMD); <span class="comment">// 设置页地址</span></span><br><span class="line">    OLED_WR_Byte(((x &amp; <span class="number">0xf0</span>) &gt;&gt; <span class="number">4</span>) | <span class="number">0x10</span>, OLED_CMD); <span class="comment">// 设置列地址</span></span><br><span class="line">    OLED_WR_Byte((x &amp; <span class="number">0x0f</span>), OLED_CMD); <span class="comment">// 设置低 4 位列地址</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// OLED 开启显示</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Display_On</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    OLED_WR_Byte(<span class="number">0X8D</span>, OLED_CMD); <span class="comment">// 设置充电泵</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0X14</span>, OLED_CMD); <span class="comment">// 启动充电泵</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0XAF</span>, OLED_CMD); <span class="comment">// 开启显示</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// OLED 关闭显示</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Display_Off</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    OLED_WR_Byte(<span class="number">0X8D</span>, OLED_CMD); <span class="comment">// 设置充电泵</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0X10</span>, OLED_CMD); <span class="comment">// 关闭充电泵</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0XAE</span>, OLED_CMD); <span class="comment">// 关闭显示</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 清空显示内容</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Clear</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="type">uint8_t</span> i, n;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123; <span class="comment">// 遍历每一页</span></span><br><span class="line">        OLED_WR_Byte(<span class="number">0xb0</span> + i, OLED_CMD); <span class="comment">// 设置页地址</span></span><br><span class="line">        OLED_WR_Byte(<span class="number">0x00</span>, OLED_CMD); <span class="comment">// 设置低列地址</span></span><br><span class="line">        OLED_WR_Byte(<span class="number">0x10</span>, OLED_CMD); <span class="comment">// 设置高列地址</span></span><br><span class="line">        <span class="keyword">for</span> (n = <span class="number">0</span>; n &lt; <span class="number">128</span>; n++) &#123;</span><br><span class="line">            OLED_WR_Byte(<span class="number">0</span>, OLED_DATA); <span class="comment">// 填充空白数据</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// OLED 开启所有像素</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_On</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="type">uint8_t</span> i, n;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">        OLED_WR_Byte(<span class="number">0xb0</span> + i, OLED_CMD); <span class="comment">// 设置页地址</span></span><br><span class="line">        OLED_WR_Byte(<span class="number">0x00</span>, OLED_CMD);     <span class="comment">// 设置低列地址</span></span><br><span class="line">        OLED_WR_Byte(<span class="number">0x10</span>, OLED_CMD);     <span class="comment">// 设置高列地址</span></span><br><span class="line">        <span class="keyword">for</span> (n = <span class="number">0</span>; n &lt; <span class="number">128</span>; n++) &#123;</span><br><span class="line">            OLED_WR_Byte(<span class="number">1</span>, OLED_DATA); <span class="comment">// 显示为全白</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在指定位置显示字符</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowChar</span><span class="params">(<span class="type">uint8_t</span> x, <span class="type">uint8_t</span> y, <span class="type">uint8_t</span> chr, <span class="type">uint8_t</span> Char_Size)</span> &#123;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> c = chr - <span class="string">&#x27; &#x27;</span>; <span class="comment">// 获取 ASCII 码索引</span></span><br><span class="line">    <span class="keyword">if</span> (x &gt; Max_Column - <span class="number">1</span>) &#123;</span><br><span class="line">        x = <span class="number">0</span>; <span class="comment">// 超过最大列数，回到第一列</span></span><br><span class="line">        y += <span class="number">2</span>; <span class="comment">// 换行</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (Char_Size == <span class="number">16</span>) &#123; <span class="comment">// 大字符</span></span><br><span class="line">        OLED_Set_Pos(x, y);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">unsigned</span> <span class="type">char</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">            OLED_WR_Byte(F8X16[c * <span class="number">16</span> + i], OLED_DATA);</span><br><span class="line">        OLED_Set_Pos(x, y + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">unsigned</span> <span class="type">char</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">            OLED_WR_Byte(F8X16[c * <span class="number">16</span> + i + <span class="number">8</span>], OLED_DATA);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">// 小字符</span></span><br><span class="line">        OLED_Set_Pos(x, y);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">unsigned</span> <span class="type">char</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)</span><br><span class="line">            OLED_WR_Byte(F6x8[c][i], OLED_DATA);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指数函数</span></span><br><span class="line"><span class="type">uint32_t</span> <span class="title function_">oled_pow</span><span class="params">(<span class="type">uint8_t</span> m, <span class="type">uint8_t</span> n)</span> &#123;</span><br><span class="line">    <span class="type">uint32_t</span> result = <span class="number">1</span>;     </span><br><span class="line">    <span class="keyword">while</span> (n--) result *= m;    </span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在指定位置显示数字</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowNum</span><span class="params">(<span class="type">uint8_t</span> x, <span class="type">uint8_t</span> y, <span class="type">uint32_t</span> num, <span class="type">uint8_t</span> len, <span class="type">uint8_t</span> size2)</span> &#123;</span><br><span class="line">    <span class="type">uint8_t</span> t, temp;</span><br><span class="line">    <span class="type">uint8_t</span> enshow = <span class="number">0</span>; <span class="comment">// 标记是否已经开始显示</span></span><br><span class="line">    <span class="keyword">for</span> (t = <span class="number">0</span>; t &lt; len; t++) &#123;</span><br><span class="line">        temp = (num / oled_pow(<span class="number">10</span>, len - t - <span class="number">1</span>)) % <span class="number">10</span>; <span class="comment">// 取得当前位数字</span></span><br><span class="line">        <span class="keyword">if</span> (enshow == <span class="number">0</span> &amp;&amp; t &lt; (len - <span class="number">1</span>)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (temp == <span class="number">0</span>) &#123;</span><br><span class="line">                OLED_ShowChar(x + (size2 / <span class="number">2</span>) * t, y, <span class="string">&#x27; &#x27;</span>, size2); <span class="comment">// 不显示 0</span></span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                enshow = <span class="number">1</span>; <span class="comment">// 一旦显示数字，不再显示空格</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        OLED_ShowChar(x + (size2 / <span class="number">2</span>) * t, y, temp + <span class="string">&#x27;0&#x27;</span>, size2); <span class="comment">// 显示数字</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在指定位置显示字符串</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowString</span><span class="params">(<span class="type">uint8_t</span> x, <span class="type">uint8_t</span> y, <span class="type">uint8_t</span> *chr, <span class="type">uint8_t</span> Char_Size)</span> &#123;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (chr[j] != <span class="string">&#x27;\0&#x27;</span>) &#123;</span><br><span class="line">        OLED_ShowChar(x, y, chr[j], Char_Size); <span class="comment">// 显示字符</span></span><br><span class="line">        x += <span class="number">8</span>; <span class="comment">// 下一个字符距离</span></span><br><span class="line">        <span class="keyword">if</span> (x &gt; <span class="number">120</span>) &#123; <span class="comment">// 如果超出一行长度，换行</span></span><br><span class="line">            x = <span class="number">0</span>; </span><br><span class="line">            y += <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        j++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示中文字符</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowCHinese</span><span class="params">(<span class="type">uint8_t</span> x, <span class="type">uint8_t</span> y, <span class="type">uint8_t</span> no)</span> &#123;      		    </span><br><span class="line">    <span class="type">uint8_t</span> t;</span><br><span class="line">    OLED_Set_Pos(x, y);	</span><br><span class="line">    <span class="keyword">for</span> (t = <span class="number">0</span>; t &lt; <span class="number">16</span>; t++) &#123;</span><br><span class="line">        OLED_WR_Byte(Hzk[<span class="number">2</span> * no][t], OLED_DATA); <span class="comment">// 显示上半部分</span></span><br><span class="line">    &#125;	</span><br><span class="line">    OLED_Set_Pos(x, y + <span class="number">1</span>);	</span><br><span class="line">    <span class="keyword">for</span> (t = <span class="number">0</span>; t &lt; <span class="number">16</span>; t++) &#123;</span><br><span class="line">        OLED_WR_Byte(Hzk[<span class="number">2</span> * no + <span class="number">1</span>][t], OLED_DATA); <span class="comment">// 显示下半部分</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绘制 BMP 位图</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_DrawBMP</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> x0, <span class="type">unsigned</span> <span class="type">char</span> y0, <span class="type">unsigned</span> <span class="type">char</span> x1, <span class="type">unsigned</span> <span class="type">char</span> y1, <span class="type">unsigned</span> <span class="type">char</span> BMP[])</span> &#123; 	</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> x, y;</span><br><span class="line">    <span class="keyword">if</span> (y1 % <span class="number">8</span> == <span class="number">0</span>) y = y1 / <span class="number">8</span>;       </span><br><span class="line">    <span class="keyword">else</span> y = y1 / <span class="number">8</span> + <span class="number">1</span>; <span class="comment">// 判断总共的页数</span></span><br><span class="line">    <span class="keyword">for</span> (y = y0; y &lt; y1; y++) &#123;</span><br><span class="line">        OLED_Set_Pos(x0, y); <span class="comment">// 设置起始位置</span></span><br><span class="line">        <span class="keyword">for</span> (x = x0; x &lt; x1; x++) &#123;      </span><br><span class="line">            OLED_WR_Byte(BMP[j++], OLED_DATA); <span class="comment">// 绘制 BMP 数据</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化 OLED 显示屏</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Init</span><span class="params">(<span class="type">void</span>)</span> &#123; 	</span><br><span class="line">    HAL_Delay(<span class="number">800</span>); <span class="comment">// 等待 OLED 准备</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0xAE</span>, OLED_CMD); <span class="comment">// 关闭显示</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0x00</span>, OLED_CMD); <span class="comment">// 设置低列地址</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0x10</span>, OLED_CMD); <span class="comment">// 设置高列地址</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0x40</span>, OLED_CMD); <span class="comment">// 设置起始行</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0xB0</span>, OLED_CMD); <span class="comment">// 设置页地址</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0x81</span>, OLED_CMD); <span class="comment">// 对比度控制</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0xFF</span>, OLED_CMD); <span class="comment">// 128</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0xA1</span>, OLED_CMD); <span class="comment">// 设置段重映射</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0xA6</span>, OLED_CMD); <span class="comment">// 正常显示</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0xA8</span>, OLED_CMD); <span class="comment">// 设置多路复用比率</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0x3F</span>, OLED_CMD); <span class="comment">// 1/64 duty</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0xC8</span>, OLED_CMD); <span class="comment">// 器件扫描方向</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0xD3</span>, OLED_CMD); <span class="comment">// 设置偏移</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0x00</span>, OLED_CMD); <span class="comment">// none</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0xD5</span>, OLED_CMD); <span class="comment">// 设置时钟分频</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0x80</span>, OLED_CMD); <span class="comment">// none</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0xD8</span>, OLED_CMD); <span class="comment">// 设置区域色彩模式</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0x05</span>, OLED_CMD); <span class="comment">// none</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0xD9</span>, OLED_CMD); <span class="comment">// 设定预充电周期</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0xF1</span>, OLED_CMD); <span class="comment">// none</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0xDA</span>, OLED_CMD); <span class="comment">// 设置 COM 引脚配置</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0x12</span>, OLED_CMD); <span class="comment">// none</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0xDB</span>, OLED_CMD); <span class="comment">// 设置 Vcomh 电压</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0x30</span>, OLED_CMD); <span class="comment">// none</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0x8D</span>, OLED_CMD); <span class="comment">// 设置充电泵使能</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0x14</span>, OLED_CMD); <span class="comment">// 启用充电泵</span></span><br><span class="line">    OLED_WR_Byte(<span class="number">0xAF</span>, OLED_CMD); <span class="comment">// 开启显示</span></span><br><span class="line">&#125;  </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>其对应的头文件为</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="comment">//  oled.h	 </span></span><br><span class="line"><span class="comment">//  作者         : ZTY</span></span><br><span class="line"><span class="comment">//  创建日期     : 2024-05-16</span></span><br><span class="line"><span class="comment">//  说明         : 0.96寸 OLED 显示屏驱动程序 (STM32F103ZE，通过 IIC 接口)</span></span><br><span class="line"><span class="comment">//  接线说明     : </span></span><br><span class="line"><span class="comment">//              ----------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//              GND   接地</span></span><br><span class="line"><span class="comment">//              VCC   供电 5V 或 3.3V</span></span><br><span class="line"><span class="comment">//              SCL   时钟线连接 PG2 (SCL)</span></span><br><span class="line"><span class="comment">//              SDA   数据线连接 PG3 (SDA)            </span></span><br><span class="line"><span class="comment">//              ----------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __OLED_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __OLED_H			  	 </span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stdlib.h&quot;</span>	</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;main.h&quot;</span>    	</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OLED_MODE 0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SIZE 8</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> XLevelL		0x00</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> XLevelH		0x10</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Max_Column	128</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Max_Row		64</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span>	Brightness	0xFF </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> X_WIDTH 	128</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Y_WIDTH 	64	    						  </span></span><br><span class="line"><span class="comment">//-----------------OLED IIC端口定义----------------  					   </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OLED_SCLK_Clr() HAL_GPIO_WritePin(OLED_SCL_GPIO_Port, OLED_SCL_Pin, GPIO_PIN_RESET)<span class="comment">//设置SCL低电平</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OLED_SCLK_Set() HAL_GPIO_WritePin(OLED_SCL_GPIO_Port, OLED_SCL_Pin, GPIO_PIN_SET)<span class="comment">//设置SCL高电平</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OLED_SDIN_Clr() HAL_GPIO_WritePin(OLED_SDA_GPIO_Port,OLED_SDA_Pin,GPIO_PIN_RESET)<span class="comment">//设置SDA低电平</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OLED_SDIN_Set() HAL_GPIO_WritePin(OLED_SDA_GPIO_Port,OLED_SDA_Pin,GPIO_PIN_SET)<span class="comment">//设置SDA高电平</span></span></span><br><span class="line"> 		     </span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OLED_CMD  0	<span class="comment">//写命令</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OLED_DATA 1	<span class="comment">//写数据</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//OLED控制用函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_WR_Byte</span><span class="params">(<span class="type">unsigned</span> dat,<span class="type">unsigned</span> cmd)</span>;  </span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Display_On</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Display_Off</span><span class="params">(<span class="type">void</span>)</span>;	   							   		    </span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Init</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Clear</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_DrawPoint</span><span class="params">(<span class="type">uint8_t</span> x,<span class="type">uint8_t</span> y,<span class="type">uint8_t</span> t)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Fill</span><span class="params">(<span class="type">uint8_t</span> x1,<span class="type">uint8_t</span> y1,<span class="type">uint8_t</span> x2,<span class="type">uint8_t</span> y2,<span class="type">uint8_t</span> dot)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowChar</span><span class="params">(<span class="type">uint8_t</span> x,<span class="type">uint8_t</span> y,<span class="type">uint8_t</span> chr,<span class="type">uint8_t</span> Char_Size)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowNum</span><span class="params">(<span class="type">uint8_t</span> x,<span class="type">uint8_t</span> y,<span class="type">uint32_t</span> num,<span class="type">uint8_t</span> len,<span class="type">uint8_t</span> size)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowString</span><span class="params">(<span class="type">uint8_t</span> x,<span class="type">uint8_t</span> y, <span class="type">uint8_t</span> *p,<span class="type">uint8_t</span> Char_Size)</span>;	 </span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Set_Pos</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> x, <span class="type">unsigned</span> <span class="type">char</span> y)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowCHinese</span><span class="params">(<span class="type">uint8_t</span> x,<span class="type">uint8_t</span> y,<span class="type">uint8_t</span> no)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_DrawBMP</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> x0, <span class="type">unsigned</span> <span class="type">char</span> y0,<span class="type">unsigned</span> <span class="type">char</span> x1, <span class="type">unsigned</span> <span class="type">char</span> y1,<span class="type">unsigned</span> <span class="type">char</span> BMP[])</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Delay_50ms</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> Del_50ms)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Delay_1ms</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> Del_1ms)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">fill_picture</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> fill_Data)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Picture</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">IIC_Start</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">IIC_Stop</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Write_IIC_Command</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> IIC_Command)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Write_IIC_Data</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> IIC_Data)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Write_IIC_Byte</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> IIC_Byte)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">IIC_Wait_Ack</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span>  </span></span><br><span class="line">	 </span><br></pre></td></tr></table></figure>
<p>将字符数据存在这个头文件</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __OLEDFONT_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __OLEDFONT_H 	   </span></span><br><span class="line"><span class="comment">//常用ASCII表</span></span><br><span class="line"><span class="comment">//偏移量32</span></span><br><span class="line"><span class="comment">//ASCII字符集</span></span><br><span class="line"><span class="comment">//偏移量32</span></span><br><span class="line"><span class="comment">//大小:12*6</span></span><br><span class="line"><span class="comment">/************************************6*8的点阵************************************/</span></span><br><span class="line"><span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> F6x8[][<span class="number">6</span>] =		</span><br><span class="line">&#123;</span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>,<span class="comment">// sp</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x2f</span>, <span class="number">0x00</span>, <span class="number">0x00</span>,<span class="comment">// !</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x07</span>, <span class="number">0x00</span>, <span class="number">0x07</span>, <span class="number">0x00</span>,<span class="comment">// &quot;</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x14</span>, <span class="number">0x7f</span>, <span class="number">0x14</span>, <span class="number">0x7f</span>, <span class="number">0x14</span>,<span class="comment">// #</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x24</span>, <span class="number">0x2a</span>, <span class="number">0x7f</span>, <span class="number">0x2a</span>, <span class="number">0x12</span>,<span class="comment">// $</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x62</span>, <span class="number">0x64</span>, <span class="number">0x08</span>, <span class="number">0x13</span>, <span class="number">0x23</span>,<span class="comment">// %</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x36</span>, <span class="number">0x49</span>, <span class="number">0x55</span>, <span class="number">0x22</span>, <span class="number">0x50</span>,<span class="comment">// &amp;</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x05</span>, <span class="number">0x03</span>, <span class="number">0x00</span>, <span class="number">0x00</span>,<span class="comment">// &#x27;</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x1c</span>, <span class="number">0x22</span>, <span class="number">0x41</span>, <span class="number">0x00</span>,<span class="comment">// (</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x41</span>, <span class="number">0x22</span>, <span class="number">0x1c</span>, <span class="number">0x00</span>,<span class="comment">// )</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x14</span>, <span class="number">0x08</span>, <span class="number">0x3E</span>, <span class="number">0x08</span>, <span class="number">0x14</span>,<span class="comment">// *</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x08</span>, <span class="number">0x08</span>, <span class="number">0x3E</span>, <span class="number">0x08</span>, <span class="number">0x08</span>,<span class="comment">// +</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0xA0</span>, <span class="number">0x60</span>, <span class="number">0x00</span>,<span class="comment">// ,</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x08</span>, <span class="number">0x08</span>, <span class="number">0x08</span>, <span class="number">0x08</span>, <span class="number">0x08</span>,<span class="comment">// -</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x60</span>, <span class="number">0x60</span>, <span class="number">0x00</span>, <span class="number">0x00</span>,<span class="comment">// .</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x20</span>, <span class="number">0x10</span>, <span class="number">0x08</span>, <span class="number">0x04</span>, <span class="number">0x02</span>,<span class="comment">// /</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x3E</span>, <span class="number">0x51</span>, <span class="number">0x49</span>, <span class="number">0x45</span>, <span class="number">0x3E</span>,<span class="comment">// 0</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x42</span>, <span class="number">0x7F</span>, <span class="number">0x40</span>, <span class="number">0x00</span>,<span class="comment">// 1</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x42</span>, <span class="number">0x61</span>, <span class="number">0x51</span>, <span class="number">0x49</span>, <span class="number">0x46</span>,<span class="comment">// 2</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x21</span>, <span class="number">0x41</span>, <span class="number">0x45</span>, <span class="number">0x4B</span>, <span class="number">0x31</span>,<span class="comment">// 3</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x18</span>, <span class="number">0x14</span>, <span class="number">0x12</span>, <span class="number">0x7F</span>, <span class="number">0x10</span>,<span class="comment">// 4</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x27</span>, <span class="number">0x45</span>, <span class="number">0x45</span>, <span class="number">0x45</span>, <span class="number">0x39</span>,<span class="comment">// 5</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x3C</span>, <span class="number">0x4A</span>, <span class="number">0x49</span>, <span class="number">0x49</span>, <span class="number">0x30</span>,<span class="comment">// 6</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x01</span>, <span class="number">0x71</span>, <span class="number">0x09</span>, <span class="number">0x05</span>, <span class="number">0x03</span>,<span class="comment">// 7</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x36</span>, <span class="number">0x49</span>, <span class="number">0x49</span>, <span class="number">0x49</span>, <span class="number">0x36</span>,<span class="comment">// 8</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x06</span>, <span class="number">0x49</span>, <span class="number">0x49</span>, <span class="number">0x29</span>, <span class="number">0x1E</span>,<span class="comment">// 9</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x36</span>, <span class="number">0x36</span>, <span class="number">0x00</span>, <span class="number">0x00</span>,<span class="comment">// :</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x56</span>, <span class="number">0x36</span>, <span class="number">0x00</span>, <span class="number">0x00</span>,<span class="comment">// ;</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x08</span>, <span class="number">0x14</span>, <span class="number">0x22</span>, <span class="number">0x41</span>, <span class="number">0x00</span>,<span class="comment">// &lt;</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x14</span>, <span class="number">0x14</span>, <span class="number">0x14</span>, <span class="number">0x14</span>, <span class="number">0x14</span>,<span class="comment">// =</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x41</span>, <span class="number">0x22</span>, <span class="number">0x14</span>, <span class="number">0x08</span>,<span class="comment">// &gt;</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x02</span>, <span class="number">0x01</span>, <span class="number">0x51</span>, <span class="number">0x09</span>, <span class="number">0x06</span>,<span class="comment">// ?</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x32</span>, <span class="number">0x49</span>, <span class="number">0x59</span>, <span class="number">0x51</span>, <span class="number">0x3E</span>,<span class="comment">// @</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7C</span>, <span class="number">0x12</span>, <span class="number">0x11</span>, <span class="number">0x12</span>, <span class="number">0x7C</span>,<span class="comment">// A</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7F</span>, <span class="number">0x49</span>, <span class="number">0x49</span>, <span class="number">0x49</span>, <span class="number">0x36</span>,<span class="comment">// B</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x3E</span>, <span class="number">0x41</span>, <span class="number">0x41</span>, <span class="number">0x41</span>, <span class="number">0x22</span>,<span class="comment">// C</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7F</span>, <span class="number">0x41</span>, <span class="number">0x41</span>, <span class="number">0x22</span>, <span class="number">0x1C</span>,<span class="comment">// D</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7F</span>, <span class="number">0x49</span>, <span class="number">0x49</span>, <span class="number">0x49</span>, <span class="number">0x41</span>,<span class="comment">// E</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7F</span>, <span class="number">0x09</span>, <span class="number">0x09</span>, <span class="number">0x09</span>, <span class="number">0x01</span>,<span class="comment">// F</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x3E</span>, <span class="number">0x41</span>, <span class="number">0x49</span>, <span class="number">0x49</span>, <span class="number">0x7A</span>,<span class="comment">// G</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7F</span>, <span class="number">0x08</span>, <span class="number">0x08</span>, <span class="number">0x08</span>, <span class="number">0x7F</span>,<span class="comment">// H</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x41</span>, <span class="number">0x7F</span>, <span class="number">0x41</span>, <span class="number">0x00</span>,<span class="comment">// I</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x20</span>, <span class="number">0x40</span>, <span class="number">0x41</span>, <span class="number">0x3F</span>, <span class="number">0x01</span>,<span class="comment">// J</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7F</span>, <span class="number">0x08</span>, <span class="number">0x14</span>, <span class="number">0x22</span>, <span class="number">0x41</span>,<span class="comment">// K</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7F</span>, <span class="number">0x40</span>, <span class="number">0x40</span>, <span class="number">0x40</span>, <span class="number">0x40</span>,<span class="comment">// L</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7F</span>, <span class="number">0x02</span>, <span class="number">0x0C</span>, <span class="number">0x02</span>, <span class="number">0x7F</span>,<span class="comment">// M</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7F</span>, <span class="number">0x04</span>, <span class="number">0x08</span>, <span class="number">0x10</span>, <span class="number">0x7F</span>,<span class="comment">// N</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x3E</span>, <span class="number">0x41</span>, <span class="number">0x41</span>, <span class="number">0x41</span>, <span class="number">0x3E</span>,<span class="comment">// O</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7F</span>, <span class="number">0x09</span>, <span class="number">0x09</span>, <span class="number">0x09</span>, <span class="number">0x06</span>,<span class="comment">// P</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x3E</span>, <span class="number">0x41</span>, <span class="number">0x51</span>, <span class="number">0x21</span>, <span class="number">0x5E</span>,<span class="comment">// Q</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7F</span>, <span class="number">0x09</span>, <span class="number">0x19</span>, <span class="number">0x29</span>, <span class="number">0x46</span>,<span class="comment">// R</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x46</span>, <span class="number">0x49</span>, <span class="number">0x49</span>, <span class="number">0x49</span>, <span class="number">0x31</span>,<span class="comment">// S</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x01</span>, <span class="number">0x01</span>, <span class="number">0x7F</span>, <span class="number">0x01</span>, <span class="number">0x01</span>,<span class="comment">// T</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x3F</span>, <span class="number">0x40</span>, <span class="number">0x40</span>, <span class="number">0x40</span>, <span class="number">0x3F</span>,<span class="comment">// U</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x1F</span>, <span class="number">0x20</span>, <span class="number">0x40</span>, <span class="number">0x20</span>, <span class="number">0x1F</span>,<span class="comment">// V</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x3F</span>, <span class="number">0x40</span>, <span class="number">0x38</span>, <span class="number">0x40</span>, <span class="number">0x3F</span>,<span class="comment">// W</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x63</span>, <span class="number">0x14</span>, <span class="number">0x08</span>, <span class="number">0x14</span>, <span class="number">0x63</span>,<span class="comment">// X</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x07</span>, <span class="number">0x08</span>, <span class="number">0x70</span>, <span class="number">0x08</span>, <span class="number">0x07</span>,<span class="comment">// Y</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x61</span>, <span class="number">0x51</span>, <span class="number">0x49</span>, <span class="number">0x45</span>, <span class="number">0x43</span>,<span class="comment">// Z</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x7F</span>, <span class="number">0x41</span>, <span class="number">0x41</span>, <span class="number">0x00</span>,<span class="comment">// [</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x55</span>, <span class="number">0x2A</span>, <span class="number">0x55</span>, <span class="number">0x2A</span>, <span class="number">0x55</span>,<span class="comment">// 55</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x41</span>, <span class="number">0x41</span>, <span class="number">0x7F</span>, <span class="number">0x00</span>,<span class="comment">// ]</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x04</span>, <span class="number">0x02</span>, <span class="number">0x01</span>, <span class="number">0x02</span>, <span class="number">0x04</span>,<span class="comment">// ^</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x40</span>, <span class="number">0x40</span>, <span class="number">0x40</span>, <span class="number">0x40</span>, <span class="number">0x40</span>,<span class="comment">// _</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x01</span>, <span class="number">0x02</span>, <span class="number">0x04</span>, <span class="number">0x00</span>,<span class="comment">// &#x27;</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x20</span>, <span class="number">0x54</span>, <span class="number">0x54</span>, <span class="number">0x54</span>, <span class="number">0x78</span>,<span class="comment">// a</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7F</span>, <span class="number">0x48</span>, <span class="number">0x44</span>, <span class="number">0x44</span>, <span class="number">0x38</span>,<span class="comment">// b</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x38</span>, <span class="number">0x44</span>, <span class="number">0x44</span>, <span class="number">0x44</span>, <span class="number">0x20</span>,<span class="comment">// c</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x38</span>, <span class="number">0x44</span>, <span class="number">0x44</span>, <span class="number">0x48</span>, <span class="number">0x7F</span>,<span class="comment">// d</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x38</span>, <span class="number">0x54</span>, <span class="number">0x54</span>, <span class="number">0x54</span>, <span class="number">0x18</span>,<span class="comment">// e</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x08</span>, <span class="number">0x7E</span>, <span class="number">0x09</span>, <span class="number">0x01</span>, <span class="number">0x02</span>,<span class="comment">// f</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x18</span>, <span class="number">0xA4</span>, <span class="number">0xA4</span>, <span class="number">0xA4</span>, <span class="number">0x7C</span>,<span class="comment">// g</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7F</span>, <span class="number">0x08</span>, <span class="number">0x04</span>, <span class="number">0x04</span>, <span class="number">0x78</span>,<span class="comment">// h</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x44</span>, <span class="number">0x7D</span>, <span class="number">0x40</span>, <span class="number">0x00</span>,<span class="comment">// i</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x40</span>, <span class="number">0x80</span>, <span class="number">0x84</span>, <span class="number">0x7D</span>, <span class="number">0x00</span>,<span class="comment">// j</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7F</span>, <span class="number">0x10</span>, <span class="number">0x28</span>, <span class="number">0x44</span>, <span class="number">0x00</span>,<span class="comment">// k</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x00</span>, <span class="number">0x41</span>, <span class="number">0x7F</span>, <span class="number">0x40</span>, <span class="number">0x00</span>,<span class="comment">// l</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7C</span>, <span class="number">0x04</span>, <span class="number">0x18</span>, <span class="number">0x04</span>, <span class="number">0x78</span>,<span class="comment">// m</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7C</span>, <span class="number">0x08</span>, <span class="number">0x04</span>, <span class="number">0x04</span>, <span class="number">0x78</span>,<span class="comment">// n</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x38</span>, <span class="number">0x44</span>, <span class="number">0x44</span>, <span class="number">0x44</span>, <span class="number">0x38</span>,<span class="comment">// o</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0xFC</span>, <span class="number">0x24</span>, <span class="number">0x24</span>, <span class="number">0x24</span>, <span class="number">0x18</span>,<span class="comment">// p</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x18</span>, <span class="number">0x24</span>, <span class="number">0x24</span>, <span class="number">0x18</span>, <span class="number">0xFC</span>,<span class="comment">// q</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x7C</span>, <span class="number">0x08</span>, <span class="number">0x04</span>, <span class="number">0x04</span>, <span class="number">0x08</span>,<span class="comment">// r</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x48</span>, <span class="number">0x54</span>, <span class="number">0x54</span>, <span class="number">0x54</span>, <span class="number">0x20</span>,<span class="comment">// s</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x04</span>, <span class="number">0x3F</span>, <span class="number">0x44</span>, <span class="number">0x40</span>, <span class="number">0x20</span>,<span class="comment">// t</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x3C</span>, <span class="number">0x40</span>, <span class="number">0x40</span>, <span class="number">0x20</span>, <span class="number">0x7C</span>,<span class="comment">// u</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x1C</span>, <span class="number">0x20</span>, <span class="number">0x40</span>, <span class="number">0x20</span>, <span class="number">0x1C</span>,<span class="comment">// v</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x3C</span>, <span class="number">0x40</span>, <span class="number">0x30</span>, <span class="number">0x40</span>, <span class="number">0x3C</span>,<span class="comment">// w</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x44</span>, <span class="number">0x28</span>, <span class="number">0x10</span>, <span class="number">0x28</span>, <span class="number">0x44</span>,<span class="comment">// x</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x1C</span>, <span class="number">0xA0</span>, <span class="number">0xA0</span>, <span class="number">0xA0</span>, <span class="number">0x7C</span>,<span class="comment">// y</span></span><br><span class="line"><span class="number">0x00</span>, <span class="number">0x44</span>, <span class="number">0x64</span>, <span class="number">0x54</span>, <span class="number">0x4C</span>, <span class="number">0x44</span>,<span class="comment">// z</span></span><br><span class="line"><span class="number">0x14</span>, <span class="number">0x14</span>, <span class="number">0x14</span>, <span class="number">0x14</span>, <span class="number">0x14</span>, <span class="number">0x14</span>,<span class="comment">// horiz lines</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/****************************************8*16的点阵************************************/</span></span><br><span class="line"><span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> F8X16[]=	  </span><br><span class="line">&#123;</span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">// 0</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xF8</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x33</span>,<span class="number">0x30</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//! 1</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x10</span>,<span class="number">0x0C</span>,<span class="number">0x06</span>,<span class="number">0x10</span>,<span class="number">0x0C</span>,<span class="number">0x06</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//&quot; 2</span></span><br><span class="line">  <span class="number">0x40</span>,<span class="number">0xC0</span>,<span class="number">0x78</span>,<span class="number">0x40</span>,<span class="number">0xC0</span>,<span class="number">0x78</span>,<span class="number">0x40</span>,<span class="number">0x00</span>,<span class="number">0x04</span>,<span class="number">0x3F</span>,<span class="number">0x04</span>,<span class="number">0x04</span>,<span class="number">0x3F</span>,<span class="number">0x04</span>,<span class="number">0x04</span>,<span class="number">0x00</span>,<span class="comment">//# 3</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x70</span>,<span class="number">0x88</span>,<span class="number">0xFC</span>,<span class="number">0x08</span>,<span class="number">0x30</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x18</span>,<span class="number">0x20</span>,<span class="number">0xFF</span>,<span class="number">0x21</span>,<span class="number">0x1E</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//$ 4</span></span><br><span class="line">  <span class="number">0xF0</span>,<span class="number">0x08</span>,<span class="number">0xF0</span>,<span class="number">0x00</span>,<span class="number">0xE0</span>,<span class="number">0x18</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x21</span>,<span class="number">0x1C</span>,<span class="number">0x03</span>,<span class="number">0x1E</span>,<span class="number">0x21</span>,<span class="number">0x1E</span>,<span class="number">0x00</span>,<span class="comment">//% 5</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0xF0</span>,<span class="number">0x08</span>,<span class="number">0x88</span>,<span class="number">0x70</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x1E</span>,<span class="number">0x21</span>,<span class="number">0x23</span>,<span class="number">0x24</span>,<span class="number">0x19</span>,<span class="number">0x27</span>,<span class="number">0x21</span>,<span class="number">0x10</span>,<span class="comment">//&amp; 6</span></span><br><span class="line">  <span class="number">0x10</span>,<span class="number">0x16</span>,<span class="number">0x0E</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//&#x27; 7</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xE0</span>,<span class="number">0x18</span>,<span class="number">0x04</span>,<span class="number">0x02</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x07</span>,<span class="number">0x18</span>,<span class="number">0x20</span>,<span class="number">0x40</span>,<span class="number">0x00</span>,<span class="comment">//( 8</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x02</span>,<span class="number">0x04</span>,<span class="number">0x18</span>,<span class="number">0xE0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x40</span>,<span class="number">0x20</span>,<span class="number">0x18</span>,<span class="number">0x07</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//) 9</span></span><br><span class="line">  <span class="number">0x40</span>,<span class="number">0x40</span>,<span class="number">0x80</span>,<span class="number">0xF0</span>,<span class="number">0x80</span>,<span class="number">0x40</span>,<span class="number">0x40</span>,<span class="number">0x00</span>,<span class="number">0x02</span>,<span class="number">0x02</span>,<span class="number">0x01</span>,<span class="number">0x0F</span>,<span class="number">0x01</span>,<span class="number">0x02</span>,<span class="number">0x02</span>,<span class="number">0x00</span>,<span class="comment">//* 10</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xF0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x1F</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="comment">//+ 11</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0xB0</span>,<span class="number">0x70</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//, 12</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="comment">//- 13</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x30</span>,<span class="number">0x30</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//. 14</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x60</span>,<span class="number">0x18</span>,<span class="number">0x04</span>,<span class="number">0x00</span>,<span class="number">0x60</span>,<span class="number">0x18</span>,<span class="number">0x06</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">/// 15</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0xE0</span>,<span class="number">0x10</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x10</span>,<span class="number">0xE0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x0F</span>,<span class="number">0x10</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x10</span>,<span class="number">0x0F</span>,<span class="number">0x00</span>,<span class="comment">//0 16</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x10</span>,<span class="number">0x10</span>,<span class="number">0xF8</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//1 17</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x70</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x88</span>,<span class="number">0x70</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x30</span>,<span class="number">0x28</span>,<span class="number">0x24</span>,<span class="number">0x22</span>,<span class="number">0x21</span>,<span class="number">0x30</span>,<span class="number">0x00</span>,<span class="comment">//2 18</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x30</span>,<span class="number">0x08</span>,<span class="number">0x88</span>,<span class="number">0x88</span>,<span class="number">0x48</span>,<span class="number">0x30</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x18</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x11</span>,<span class="number">0x0E</span>,<span class="number">0x00</span>,<span class="comment">//3 19</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xC0</span>,<span class="number">0x20</span>,<span class="number">0x10</span>,<span class="number">0xF8</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x07</span>,<span class="number">0x04</span>,<span class="number">0x24</span>,<span class="number">0x24</span>,<span class="number">0x3F</span>,<span class="number">0x24</span>,<span class="number">0x00</span>,<span class="comment">//4 20</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0xF8</span>,<span class="number">0x08</span>,<span class="number">0x88</span>,<span class="number">0x88</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x19</span>,<span class="number">0x21</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x11</span>,<span class="number">0x0E</span>,<span class="number">0x00</span>,<span class="comment">//5 21</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0xE0</span>,<span class="number">0x10</span>,<span class="number">0x88</span>,<span class="number">0x88</span>,<span class="number">0x18</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x0F</span>,<span class="number">0x11</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x11</span>,<span class="number">0x0E</span>,<span class="number">0x00</span>,<span class="comment">//6 22</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x38</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0xC8</span>,<span class="number">0x38</span>,<span class="number">0x08</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x3F</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//7 23</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x70</span>,<span class="number">0x88</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x88</span>,<span class="number">0x70</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x1C</span>,<span class="number">0x22</span>,<span class="number">0x21</span>,<span class="number">0x21</span>,<span class="number">0x22</span>,<span class="number">0x1C</span>,<span class="number">0x00</span>,<span class="comment">//8 24</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0xE0</span>,<span class="number">0x10</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x10</span>,<span class="number">0xE0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x31</span>,<span class="number">0x22</span>,<span class="number">0x22</span>,<span class="number">0x11</span>,<span class="number">0x0F</span>,<span class="number">0x00</span>,<span class="comment">//9 25</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xC0</span>,<span class="number">0xC0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x30</span>,<span class="number">0x30</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//: 26</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x60</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//; 27</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x40</span>,<span class="number">0x20</span>,<span class="number">0x10</span>,<span class="number">0x08</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x02</span>,<span class="number">0x04</span>,<span class="number">0x08</span>,<span class="number">0x10</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="comment">//&lt; 28</span></span><br><span class="line">  <span class="number">0x40</span>,<span class="number">0x40</span>,<span class="number">0x40</span>,<span class="number">0x40</span>,<span class="number">0x40</span>,<span class="number">0x40</span>,<span class="number">0x40</span>,<span class="number">0x00</span>,<span class="number">0x04</span>,<span class="number">0x04</span>,<span class="number">0x04</span>,<span class="number">0x04</span>,<span class="number">0x04</span>,<span class="number">0x04</span>,<span class="number">0x04</span>,<span class="number">0x00</span>,<span class="comment">//= 29</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x08</span>,<span class="number">0x10</span>,<span class="number">0x20</span>,<span class="number">0x40</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x10</span>,<span class="number">0x08</span>,<span class="number">0x04</span>,<span class="number">0x02</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="comment">//&gt; 30</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x70</span>,<span class="number">0x48</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0xF0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x30</span>,<span class="number">0x36</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//? 31</span></span><br><span class="line">  <span class="number">0xC0</span>,<span class="number">0x30</span>,<span class="number">0xC8</span>,<span class="number">0x28</span>,<span class="number">0xE8</span>,<span class="number">0x10</span>,<span class="number">0xE0</span>,<span class="number">0x00</span>,<span class="number">0x07</span>,<span class="number">0x18</span>,<span class="number">0x27</span>,<span class="number">0x24</span>,<span class="number">0x23</span>,<span class="number">0x14</span>,<span class="number">0x0B</span>,<span class="number">0x00</span>,<span class="comment">//@ 32</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xC0</span>,<span class="number">0x38</span>,<span class="number">0xE0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3C</span>,<span class="number">0x23</span>,<span class="number">0x02</span>,<span class="number">0x02</span>,<span class="number">0x27</span>,<span class="number">0x38</span>,<span class="number">0x20</span>,<span class="comment">//A 33</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x88</span>,<span class="number">0x88</span>,<span class="number">0x88</span>,<span class="number">0x70</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x11</span>,<span class="number">0x0E</span>,<span class="number">0x00</span>,<span class="comment">//B 34</span></span><br><span class="line">  <span class="number">0xC0</span>,<span class="number">0x30</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x38</span>,<span class="number">0x00</span>,<span class="number">0x07</span>,<span class="number">0x18</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x10</span>,<span class="number">0x08</span>,<span class="number">0x00</span>,<span class="comment">//C 35</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x10</span>,<span class="number">0xE0</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x10</span>,<span class="number">0x0F</span>,<span class="number">0x00</span>,<span class="comment">//D 36</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x88</span>,<span class="number">0x88</span>,<span class="number">0xE8</span>,<span class="number">0x08</span>,<span class="number">0x10</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x23</span>,<span class="number">0x20</span>,<span class="number">0x18</span>,<span class="number">0x00</span>,<span class="comment">//E 37</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x88</span>,<span class="number">0x88</span>,<span class="number">0xE8</span>,<span class="number">0x08</span>,<span class="number">0x10</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="number">0x03</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//F 38</span></span><br><span class="line">  <span class="number">0xC0</span>,<span class="number">0x30</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x38</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x07</span>,<span class="number">0x18</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x22</span>,<span class="number">0x1E</span>,<span class="number">0x02</span>,<span class="number">0x00</span>,<span class="comment">//G 39</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x08</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x08</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x21</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x21</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="comment">//H 40</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//I 41</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x00</span>,<span class="number">0xC0</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x7F</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//J 42</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x88</span>,<span class="number">0xC0</span>,<span class="number">0x28</span>,<span class="number">0x18</span>,<span class="number">0x08</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x01</span>,<span class="number">0x26</span>,<span class="number">0x38</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="comment">//K 43</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x08</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x30</span>,<span class="number">0x00</span>,<span class="comment">//L 44</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0xF8</span>,<span class="number">0x00</span>,<span class="number">0xF8</span>,<span class="number">0xF8</span>,<span class="number">0x08</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x00</span>,<span class="number">0x3F</span>,<span class="number">0x00</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="comment">//M 45</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x30</span>,<span class="number">0xC0</span>,<span class="number">0x00</span>,<span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x08</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="number">0x07</span>,<span class="number">0x18</span>,<span class="number">0x3F</span>,<span class="number">0x00</span>,<span class="comment">//N 46</span></span><br><span class="line">  <span class="number">0xE0</span>,<span class="number">0x10</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x10</span>,<span class="number">0xE0</span>,<span class="number">0x00</span>,<span class="number">0x0F</span>,<span class="number">0x10</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x10</span>,<span class="number">0x0F</span>,<span class="number">0x00</span>,<span class="comment">//O 47</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0xF0</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x21</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//P 48</span></span><br><span class="line">  <span class="number">0xE0</span>,<span class="number">0x10</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x10</span>,<span class="number">0xE0</span>,<span class="number">0x00</span>,<span class="number">0x0F</span>,<span class="number">0x18</span>,<span class="number">0x24</span>,<span class="number">0x24</span>,<span class="number">0x38</span>,<span class="number">0x50</span>,<span class="number">0x4F</span>,<span class="number">0x00</span>,<span class="comment">//Q 49</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x88</span>,<span class="number">0x88</span>,<span class="number">0x88</span>,<span class="number">0x88</span>,<span class="number">0x70</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="number">0x03</span>,<span class="number">0x0C</span>,<span class="number">0x30</span>,<span class="number">0x20</span>,<span class="comment">//R 50</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x70</span>,<span class="number">0x88</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x38</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x38</span>,<span class="number">0x20</span>,<span class="number">0x21</span>,<span class="number">0x21</span>,<span class="number">0x22</span>,<span class="number">0x1C</span>,<span class="number">0x00</span>,<span class="comment">//S 51</span></span><br><span class="line">  <span class="number">0x18</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x18</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//T 52</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x08</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x08</span>,<span class="number">0x00</span>,<span class="number">0x1F</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x1F</span>,<span class="number">0x00</span>,<span class="comment">//U 53</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0x78</span>,<span class="number">0x88</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xC8</span>,<span class="number">0x38</span>,<span class="number">0x08</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x07</span>,<span class="number">0x38</span>,<span class="number">0x0E</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//V 54</span></span><br><span class="line">  <span class="number">0xF8</span>,<span class="number">0x08</span>,<span class="number">0x00</span>,<span class="number">0xF8</span>,<span class="number">0x00</span>,<span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x00</span>,<span class="number">0x03</span>,<span class="number">0x3C</span>,<span class="number">0x07</span>,<span class="number">0x00</span>,<span class="number">0x07</span>,<span class="number">0x3C</span>,<span class="number">0x03</span>,<span class="number">0x00</span>,<span class="comment">//W 55</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0x18</span>,<span class="number">0x68</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x68</span>,<span class="number">0x18</span>,<span class="number">0x08</span>,<span class="number">0x20</span>,<span class="number">0x30</span>,<span class="number">0x2C</span>,<span class="number">0x03</span>,<span class="number">0x03</span>,<span class="number">0x2C</span>,<span class="number">0x30</span>,<span class="number">0x20</span>,<span class="comment">//X 56</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0x38</span>,<span class="number">0xC8</span>,<span class="number">0x00</span>,<span class="number">0xC8</span>,<span class="number">0x38</span>,<span class="number">0x08</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//Y 57</span></span><br><span class="line">  <span class="number">0x10</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0xC8</span>,<span class="number">0x38</span>,<span class="number">0x08</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x38</span>,<span class="number">0x26</span>,<span class="number">0x21</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x18</span>,<span class="number">0x00</span>,<span class="comment">//Z 58</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFE</span>,<span class="number">0x02</span>,<span class="number">0x02</span>,<span class="number">0x02</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x7F</span>,<span class="number">0x40</span>,<span class="number">0x40</span>,<span class="number">0x40</span>,<span class="number">0x00</span>,<span class="comment">//[ 59</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x0C</span>,<span class="number">0x30</span>,<span class="number">0xC0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x06</span>,<span class="number">0x38</span>,<span class="number">0xC0</span>,<span class="number">0x00</span>,<span class="comment">//\ 60</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x02</span>,<span class="number">0x02</span>,<span class="number">0x02</span>,<span class="number">0xFE</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x40</span>,<span class="number">0x40</span>,<span class="number">0x40</span>,<span class="number">0x7F</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//] 61</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x04</span>,<span class="number">0x02</span>,<span class="number">0x02</span>,<span class="number">0x02</span>,<span class="number">0x04</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//^ 62</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="comment">//_ 63</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x02</span>,<span class="number">0x02</span>,<span class="number">0x04</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//` 64</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x19</span>,<span class="number">0x24</span>,<span class="number">0x22</span>,<span class="number">0x22</span>,<span class="number">0x22</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="comment">//a 65</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x3F</span>,<span class="number">0x11</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x11</span>,<span class="number">0x0E</span>,<span class="number">0x00</span>,<span class="comment">//b 66</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x0E</span>,<span class="number">0x11</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x11</span>,<span class="number">0x00</span>,<span class="comment">//c 67</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x88</span>,<span class="number">0xF8</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x0E</span>,<span class="number">0x11</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x10</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="comment">//d 68</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x1F</span>,<span class="number">0x22</span>,<span class="number">0x22</span>,<span class="number">0x22</span>,<span class="number">0x22</span>,<span class="number">0x13</span>,<span class="number">0x00</span>,<span class="comment">//e 69</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0xF0</span>,<span class="number">0x88</span>,<span class="number">0x88</span>,<span class="number">0x88</span>,<span class="number">0x18</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//f 70</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x6B</span>,<span class="number">0x94</span>,<span class="number">0x94</span>,<span class="number">0x94</span>,<span class="number">0x93</span>,<span class="number">0x60</span>,<span class="number">0x00</span>,<span class="comment">//g 71</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x21</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="comment">//h 72</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x98</span>,<span class="number">0x98</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//i 73</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x98</span>,<span class="number">0x98</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xC0</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x7F</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//j 74</span></span><br><span class="line">  <span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x24</span>,<span class="number">0x02</span>,<span class="number">0x2D</span>,<span class="number">0x30</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="comment">//k 75</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x08</span>,<span class="number">0x08</span>,<span class="number">0xF8</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//l 76</span></span><br><span class="line">  <span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="number">0x3F</span>,<span class="comment">//m 77</span></span><br><span class="line">  <span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x21</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="comment">//n 78</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x1F</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x1F</span>,<span class="number">0x00</span>,<span class="comment">//o 79</span></span><br><span class="line">  <span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0xFF</span>,<span class="number">0xA1</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x11</span>,<span class="number">0x0E</span>,<span class="number">0x00</span>,<span class="comment">//p 80</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x0E</span>,<span class="number">0x11</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0xA0</span>,<span class="number">0xFF</span>,<span class="number">0x80</span>,<span class="comment">//q 81</span></span><br><span class="line">  <span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x21</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="comment">//r 82</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x33</span>,<span class="number">0x24</span>,<span class="number">0x24</span>,<span class="number">0x24</span>,<span class="number">0x24</span>,<span class="number">0x19</span>,<span class="number">0x00</span>,<span class="comment">//s 83</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0xE0</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x1F</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//t 84</span></span><br><span class="line">  <span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x1F</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x20</span>,<span class="number">0x10</span>,<span class="number">0x3F</span>,<span class="number">0x20</span>,<span class="comment">//u 85</span></span><br><span class="line">  <span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x0E</span>,<span class="number">0x30</span>,<span class="number">0x08</span>,<span class="number">0x06</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="comment">//v 86</span></span><br><span class="line">  <span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x0F</span>,<span class="number">0x30</span>,<span class="number">0x0C</span>,<span class="number">0x03</span>,<span class="number">0x0C</span>,<span class="number">0x30</span>,<span class="number">0x0F</span>,<span class="number">0x00</span>,<span class="comment">//w 87</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x31</span>,<span class="number">0x2E</span>,<span class="number">0x0E</span>,<span class="number">0x31</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="comment">//x 88</span></span><br><span class="line">  <span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x81</span>,<span class="number">0x8E</span>,<span class="number">0x70</span>,<span class="number">0x18</span>,<span class="number">0x06</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="comment">//y 89</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x21</span>,<span class="number">0x30</span>,<span class="number">0x2C</span>,<span class="number">0x22</span>,<span class="number">0x21</span>,<span class="number">0x30</span>,<span class="number">0x00</span>,<span class="comment">//z 90</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x7C</span>,<span class="number">0x02</span>,<span class="number">0x02</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x3F</span>,<span class="number">0x40</span>,<span class="number">0x40</span>,<span class="comment">//&#123; 91</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//| 92</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x02</span>,<span class="number">0x02</span>,<span class="number">0x7C</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x40</span>,<span class="number">0x40</span>,<span class="number">0x3F</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//&#125; 93</span></span><br><span class="line">  <span class="number">0x00</span>,<span class="number">0x06</span>,<span class="number">0x01</span>,<span class="number">0x01</span>,<span class="number">0x02</span>,<span class="number">0x02</span>,<span class="number">0x04</span>,<span class="number">0x04</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="comment">//~ 94</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">char</span> Hzk[][<span class="number">32</span>]=&#123;</span><br><span class="line">&#123;<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0xEE</span>,<span class="number">0x88</span>,<span class="number">0x88</span>,<span class="number">0x88</span>,<span class="number">0xE8</span>,<span class="number">0x8F</span>,<span class="number">0x08</span>,<span class="number">0x88</span>,<span class="number">0x78</span>,<span class="number">0x48</span>,<span class="number">0x4E</span>,<span class="number">0x40</span>,<span class="number">0xC0</span>,<span class="number">0x00</span>&#125;,</span><br><span class="line">&#123;<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x7F</span>,<span class="number">0x24</span>,<span class="number">0x24</span>,<span class="number">0x24</span>,<span class="number">0x7F</span>,<span class="number">0x00</span>,<span class="number">0x81</span>,<span class="number">0x40</span>,<span class="number">0x30</span>,<span class="number">0x0F</span>,<span class="number">0x30</span>,<span class="number">0x41</span>,<span class="number">0x80</span>,<span class="number">0x00</span>&#125;,<span class="comment">/*&quot;嵌&quot;,0*/</span></span><br><span class="line"></span><br><span class="line">&#123;<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0xE2</span>,<span class="number">0x1C</span>,<span class="number">0xE0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>&#125;,</span><br><span class="line">&#123;<span class="number">0x80</span>,<span class="number">0x40</span>,<span class="number">0x20</span>,<span class="number">0x10</span>,<span class="number">0x0C</span>,<span class="number">0x03</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x03</span>,<span class="number">0x0C</span>,<span class="number">0x30</span>,<span class="number">0x40</span>,<span class="number">0x80</span>,<span class="number">0x80</span>,<span class="number">0x00</span>&#125;,<span class="comment">/*&quot;入&quot;,1*/</span></span><br><span class="line"></span><br><span class="line">&#123;<span class="number">0x10</span>,<span class="number">0x10</span>,<span class="number">0x90</span>,<span class="number">0x90</span>,<span class="number">0x90</span>,<span class="number">0x90</span>,<span class="number">0x90</span>,<span class="number">0x10</span>,<span class="number">0x10</span>,<span class="number">0xFF</span>,<span class="number">0x10</span>,<span class="number">0x10</span>,<span class="number">0x11</span>,<span class="number">0x16</span>,<span class="number">0x10</span>,<span class="number">0x00</span>&#125;,</span><br><span class="line">&#123;<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x60</span>,<span class="number">0x20</span>,<span class="number">0x3F</span>,<span class="number">0x10</span>,<span class="number">0x10</span>,<span class="number">0x10</span>,<span class="number">0x00</span>,<span class="number">0x03</span>,<span class="number">0x0C</span>,<span class="number">0x10</span>,<span class="number">0x20</span>,<span class="number">0x40</span>,<span class="number">0xF8</span>,<span class="number">0x00</span>&#125;,<span class="comment">/*&quot;式&quot;,2*/</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="硬件IIC-1"><a href="#硬件IIC-1" class="headerlink" title="硬件IIC"></a>硬件IIC</h2><p>依旧是要先进行初始化</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* USER CODE BEGIN 2 */</span></span><br><span class="line">	OLED_Init();                           <span class="comment">//OLED初始</span></span><br><span class="line">	OLED_Clear();                         <span class="comment">//清屏</span></span><br><span class="line">	<span class="comment">//上面的初始化以及清屏的代码在一开始处一定要写</span></span><br><span class="line">  <span class="comment">/* USER CODE END 2 */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* Infinite loop */</span></span><br><span class="line">  <span class="comment">/* USER CODE BEGIN WHILE */</span></span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">/* USER CODE END WHILE */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* USER CODE BEGIN 3 */</span></span><br><span class="line"></span><br><span class="line">		OLED_ShowString(<span class="number">0</span>,<span class="number">0</span>,<span class="string">&quot;I love you&quot;</span>,<span class="number">12</span>, <span class="number">1</span>);    <span class="comment">//反相显示8X16字符串</span></span><br><span class="line">		OLED_ShowString(<span class="number">0</span>,<span class="number">2</span>,<span class="string">&quot;ZTY&quot;</span>,<span class="number">12</span>,<span class="number">0</span>);<span class="comment">//正相显示6X8字符串</span></span><br><span class="line"></span><br><span class="line">		OLED_ShowChinese(<span class="number">0</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">1</span>); <span class="comment">//反相显示汉字“嵌”</span></span><br><span class="line">		OLED_ShowChinese(<span class="number">16</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">1</span>);<span class="comment">//反相显示汉字“入”</span></span><br><span class="line">		OLED_ShowChinese(<span class="number">32</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>);<span class="comment">//反相显示汉字“式”</span></span><br><span class="line"></span><br><span class="line">		OLED_ShowNum(<span class="number">60</span>,<span class="number">5</span>,<span class="number">22</span>,<span class="number">1</span>,<span class="number">12</span>, <span class="number">0</span>);<span class="comment">//正相显示1位8X16数字“12”</span></span><br><span class="line">		OLED_ShowNum(<span class="number">48</span>,<span class="number">7</span>,<span class="number">23</span>,<span class="number">2</span>,<span class="number">12</span>, <span class="number">1</span>);<span class="comment">//反相显示2位6X8数字“23”</span></span><br><span class="line"><span class="comment">//		OLED_DrawBMP(6,6,38,38,BMP1,0);//正相显示图片BMP1</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>OLED.c</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * oled.c</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  Created on: 2024年6月13日</span></span><br><span class="line"><span class="comment"> *      Author: ZTY</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;oled.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**********************************************************</span></span><br><span class="line"><span class="comment"> * OLED 初始化命令数组，根据芯片手册编写</span></span><br><span class="line"><span class="comment"> ***********************************************************/</span></span><br><span class="line"><span class="type">static</span> <span class="type">const</span> <span class="type">uint8_t</span> OLED_InitCmds[] = &#123;</span><br><span class="line">    <span class="number">0xAE</span>, <span class="comment">// 关闭显示</span></span><br><span class="line">    <span class="number">0xD5</span>, <span class="number">0x80</span>, <span class="comment">// 设置时钟分频</span></span><br><span class="line">    <span class="number">0xA8</span>, <span class="number">0x3F</span>, <span class="comment">// 设置MUX比率</span></span><br><span class="line">    <span class="number">0xD3</span>, <span class="number">0x00</span>, <span class="comment">// 设置显示偏移</span></span><br><span class="line">    <span class="number">0x40</span>, <span class="comment">// 设置起始行</span></span><br><span class="line">    <span class="number">0xA1</span>, <span class="comment">// 设置横向翻转</span></span><br><span class="line">    <span class="number">0xC8</span>, <span class="comment">// 设置垂直翻转</span></span><br><span class="line">    <span class="number">0xDA</span>, <span class="number">0x12</span>, <span class="comment">// 设置电源控制</span></span><br><span class="line">    <span class="number">0x81</span>, <span class="number">0xCF</span>, <span class="comment">// 设置对比度</span></span><br><span class="line">    <span class="number">0xD9</span>, <span class="number">0xF1</span>, <span class="comment">// 设置预充电周期</span></span><br><span class="line">    <span class="number">0xDB</span>, <span class="number">0x40</span>, <span class="comment">// 设置VCOMH</span></span><br><span class="line">    <span class="number">0xA4</span>, <span class="comment">// 继续显示RAM内容</span></span><br><span class="line">    <span class="number">0xA6</span>, <span class="comment">// 不反相显示</span></span><br><span class="line">    <span class="number">0x8D</span>, <span class="number">0x14</span>, <span class="comment">// 开启电源</span></span><br><span class="line">    <span class="number">0xAF</span> <span class="comment">// 打开显示</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief OLED 初始化</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Init</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    HAL_Delay(<span class="number">200</span>); <span class="comment">// 等待供电稳定</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">uint8_t</span> i = <span class="number">0</span>; i &lt; <span class="keyword">sizeof</span>(OLED_InitCmds); i++) &#123;</span><br><span class="line">        OLED_WriteCommand(OLED_InitCmds[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 向 OLED 发送控制命令</span></span><br><span class="line"><span class="comment"> * @param cmd 芯片手册规定的命令</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_WriteCommand</span><span class="params">(<span class="type">uint8_t</span> cmd)</span> &#123;</span><br><span class="line">    HAL_I2C_Mem_Write(&amp;hi2c1, <span class="number">0x78</span>, <span class="number">0x00</span>, I2C_MEMADD_SIZE_8BIT, &amp;cmd, <span class="number">1</span>, <span class="number">0x100</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 向 OLED 发送数据</span></span><br><span class="line"><span class="comment"> * @param data 要写入的数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_WriteData</span><span class="params">(<span class="type">uint8_t</span> data)</span> &#123;</span><br><span class="line">    HAL_I2C_Mem_Write(&amp;hi2c1, <span class="number">0x78</span>, <span class="number">0x40</span>, I2C_MEMADD_SIZE_8BIT, &amp;data, <span class="number">1</span>, <span class="number">0x100</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 开启 OLED 显示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_On</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">uint8_t</span> page = <span class="number">0</span>; page &lt; <span class="number">8</span>; page++) &#123;</span><br><span class="line">        OLED_WriteCommand(<span class="number">0xb0</span> + page); <span class="comment">// 设置页地址</span></span><br><span class="line">        OLED_WriteCommand(<span class="number">0x00</span>); <span class="comment">// 设置列低地址</span></span><br><span class="line">        OLED_WriteCommand(<span class="number">0x10</span>); <span class="comment">// 设置列高地址</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">uint8_t</span> n = <span class="number">0</span>; n &lt; <span class="number">128</span>; n++) &#123;</span><br><span class="line">            OLED_WriteData(<span class="number">1</span>); <span class="comment">// 将每个数据位置为1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 清空 OLED 屏幕</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Clear</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">uint8_t</span> page = <span class="number">0</span>; page &lt; <span class="number">8</span>; page++) &#123;</span><br><span class="line">        OLED_WriteCommand(<span class="number">0xb0</span> + page); <span class="comment">// 设置页地址</span></span><br><span class="line">        OLED_WriteCommand(<span class="number">0x00</span>); <span class="comment">// 设置列低地址</span></span><br><span class="line">        OLED_WriteCommand(<span class="number">0x10</span>); <span class="comment">// 设置列高地址</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">uint8_t</span> n = <span class="number">0</span>; n &lt; <span class="number">128</span>; n++) &#123;</span><br><span class="line">            OLED_WriteData(<span class="number">0</span>); <span class="comment">// 将每个数据位置为0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 开启 OLED 显示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_DisplayOn</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    OLED_WriteCommand(<span class="number">0x8D</span>); <span class="comment">// 设置 DCDC 命令</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x14</span>); <span class="comment">// 开启 DCDC</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0xAF</span>); <span class="comment">// 打开显示</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 关闭 OLED 显示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_DisplayOff</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    OLED_WriteCommand(<span class="number">0x8D</span>); <span class="comment">// 设置 DCDC 命令</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x10</span>); <span class="comment">// 关闭 DCDC</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0xAE</span>); <span class="comment">// 关闭显示</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置光标的位置</span></span><br><span class="line"><span class="comment"> * @param x X 坐标</span></span><br><span class="line"><span class="comment"> * @param y Y 坐标（页地址）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_SetPosition</span><span class="params">(<span class="type">uint8_t</span> x, <span class="type">uint8_t</span> y)</span> &#123;</span><br><span class="line">    OLED_WriteCommand(<span class="number">0xb0</span> + y); <span class="comment">// 设置页地址</span></span><br><span class="line">    OLED_WriteCommand(((x &amp; <span class="number">0xF0</span>) &gt;&gt; <span class="number">4</span>) | <span class="number">0x10</span>); <span class="comment">// 设置列高地址</span></span><br><span class="line">    OLED_WriteCommand(x &amp; <span class="number">0x0F</span>); <span class="comment">// 设置列低地址</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 计算 m^n</span></span><br><span class="line"><span class="comment"> * @param m 底</span></span><br><span class="line"><span class="comment"> * @param n 指数</span></span><br><span class="line"><span class="comment"> * @return 计算结果</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> <span class="title function_">OLED_Pow</span><span class="params">(<span class="type">uint8_t</span> m, <span class="type">uint8_t</span> n)</span> &#123;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> result = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (n--) &#123;</span><br><span class="line">        result *= m;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在 OLED 显示字符</span></span><br><span class="line"><span class="comment"> * @param x 起始横坐标</span></span><br><span class="line"><span class="comment"> * @param y 起始纵坐标</span></span><br><span class="line"><span class="comment"> * @param chr 显示的字符</span></span><br><span class="line"><span class="comment"> * @param FontSize 字体大小 (12 或 16)</span></span><br><span class="line"><span class="comment"> * @param ColorTurn 是否反相显示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowChar</span><span class="params">(<span class="type">uint8_t</span> x, <span class="type">uint8_t</span> y, <span class="type">uint8_t</span> chr, <span class="type">uint8_t</span> FontSize, <span class="type">uint8_t</span> ColorTurn)</span> &#123;</span><br><span class="line">    <span class="type">uint8_t</span> c = chr - <span class="string">&#x27; &#x27;</span>; <span class="comment">// 计算字符偏移</span></span><br><span class="line">    <span class="keyword">if</span> (x &gt; <span class="number">128</span> - <span class="number">1</span>) &#123; x = <span class="number">0</span>; y += <span class="number">2</span>; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (FontSize == <span class="number">16</span>) &#123;</span><br><span class="line">        OLED_SetPosition(x, y);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">uint8_t</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">            OLED_WriteData(ColorTurn ? ~F8X16[c * <span class="number">16</span> + i] : F8X16[c * <span class="number">16</span> + i]);</span><br><span class="line">        &#125;</span><br><span class="line">        OLED_SetPosition(x, y + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">uint8_t</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">            OLED_WriteData(ColorTurn ? ~F8X16[c * <span class="number">16</span> + i + <span class="number">8</span>] : F8X16[c * <span class="number">16</span> + i + <span class="number">8</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        OLED_SetPosition(x, y);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">uint8_t</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">            OLED_WriteData(ColorTurn ? ~F6x8[c][i] : F6x8[c][i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在 OLED 显示字符串</span></span><br><span class="line"><span class="comment"> * @param x 字符串起始横坐标</span></span><br><span class="line"><span class="comment"> * @param y 字符串起始纵坐标</span></span><br><span class="line"><span class="comment"> * @param str 字符串内容</span></span><br><span class="line"><span class="comment"> * @param FontSize 字体大小 (12 或 16)</span></span><br><span class="line"><span class="comment"> * @param ColorTurn 是否反相显示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowString</span><span class="params">(<span class="type">uint8_t</span> x, <span class="type">uint8_t</span> y, <span class="type">const</span> <span class="type">char</span> *str, <span class="type">uint8_t</span> FontSize, <span class="type">uint8_t</span> ColorTurn)</span> &#123;</span><br><span class="line">    <span class="type">uint8_t</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (str[j] != <span class="string">&#x27;\0&#x27;</span>) &#123;</span><br><span class="line">        OLED_ShowChar(x, y, str[j], FontSize, ColorTurn);</span><br><span class="line">        x += (FontSize == <span class="number">12</span>) ? <span class="number">6</span> : <span class="number">8</span>; <span class="comment">// 更新位置</span></span><br><span class="line">        <span class="keyword">if</span> ((x &gt; <span class="number">122</span> &amp;&amp; FontSize == <span class="number">12</span>) || (x &gt; <span class="number">120</span> &amp;&amp; FontSize == <span class="number">16</span>)) &#123;</span><br><span class="line">            x = <span class="number">0</span>; y++; <span class="comment">// 换行</span></span><br><span class="line">        &#125;</span><br><span class="line">        j++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在 OLED 显示数字</span></span><br><span class="line"><span class="comment"> * @param x 起始横坐标</span></span><br><span class="line"><span class="comment"> * @param y 起始纵坐标</span></span><br><span class="line"><span class="comment"> * @param num 显示的数字</span></span><br><span class="line"><span class="comment"> * @param len 数字位数</span></span><br><span class="line"><span class="comment"> * @param size2 字体大小</span></span><br><span class="line"><span class="comment"> * @param ColorTurn 是否反相显示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowNum</span><span class="params">(<span class="type">uint8_t</span> x, <span class="type">uint8_t</span> y, <span class="type">unsigned</span> <span class="type">int</span> num, <span class="type">uint8_t</span> len, <span class="type">uint8_t</span> size2, <span class="type">uint8_t</span> ColorTurn)</span> &#123;</span><br><span class="line">    <span class="type">uint8_t</span> temp, enshow = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">uint8_t</span> t = <span class="number">0</span>; t &lt; len; t++) &#123;</span><br><span class="line">        temp = (num / OLED_Pow(<span class="number">10</span>, len - t - <span class="number">1</span>)) % <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">if</span> (enshow == <span class="number">0</span> &amp;&amp; t &lt; (len - <span class="number">1</span>)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (temp == <span class="number">0</span>) &#123;</span><br><span class="line">                OLED_ShowChar(x + (size2 / <span class="number">2</span>) * t, y, <span class="string">&#x27; &#x27;</span>, size2, ColorTurn);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                enshow = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        OLED_ShowChar(x + (size2 / <span class="number">2</span>) * t, y, temp + <span class="string">&#x27;0&#x27;</span>, size2, ColorTurn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在 OLED 显示浮点数</span></span><br><span class="line"><span class="comment"> * @param x 起始横坐标</span></span><br><span class="line"><span class="comment"> * @param y 起始纵坐标</span></span><br><span class="line"><span class="comment"> * @param num 浮点数</span></span><br><span class="line"><span class="comment"> * @param z_len 整数部分位数</span></span><br><span class="line"><span class="comment"> * @param f_len 小数部分位数</span></span><br><span class="line"><span class="comment"> * @param size2 字体大小</span></span><br><span class="line"><span class="comment"> * @param ColorTurn 是否反相显示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowDecimal</span><span class="params">(<span class="type">uint8_t</span> x, <span class="type">uint8_t</span> y, <span class="type">float</span> num, <span class="type">uint8_t</span> z_len, <span class="type">uint8_t</span> f_len, <span class="type">uint8_t</span> size2, <span class="type">uint8_t</span> ColorTurn)</span> &#123;</span><br><span class="line">    <span class="type">int</span> z_temp = (<span class="type">int</span>)num;</span><br><span class="line">    <span class="type">int</span> f_temp = (<span class="type">int</span>)((num - z_temp) * OLED_Pow(<span class="number">10</span>, f_len));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (num &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        z_len += <span class="number">1</span>; <span class="comment">// 如果是负数，整数位数 +1</span></span><br><span class="line">        OLED_ShowChar(x, y, <span class="string">&#x27;-&#x27;</span>, size2, ColorTurn); <span class="comment">// 显示负号</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">uint8_t</span> t = <span class="number">0</span>; t &lt; z_len; t++) &#123;</span><br><span class="line">        <span class="type">uint8_t</span> temp = (z_temp / OLED_Pow(<span class="number">10</span>, z_len - t - <span class="number">1</span>)) % <span class="number">10</span>;</span><br><span class="line">        OLED_ShowChar(x + ((size2 / <span class="number">2</span>) * t) + (num &lt; <span class="number">0</span> ? <span class="number">6</span> : <span class="number">0</span>), y, temp + <span class="string">&#x27;0&#x27;</span>, size2, ColorTurn);</span><br><span class="line">    &#125;</span><br><span class="line">    OLED_ShowChar(x + ((size2 / <span class="number">2</span>) * z_len) + (num &lt; <span class="number">0</span> ? <span class="number">6</span> : <span class="number">0</span>), y, <span class="string">&#x27;.&#x27;</span>, size2, ColorTurn);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">uint8_t</span> t = <span class="number">0</span>; t &lt; f_len; t++) &#123;</span><br><span class="line">        <span class="type">uint8_t</span> temp = (f_temp / OLED_Pow(<span class="number">10</span>, f_len - t - <span class="number">1</span>)) % <span class="number">10</span>;</span><br><span class="line">        OLED_ShowChar(x + ((size2 / <span class="number">2</span>) * (t + z_len + <span class="number">1</span>)) + (num &lt; <span class="number">0</span> ? <span class="number">6</span> : <span class="number">0</span>), y, temp + <span class="string">&#x27;0&#x27;</span>, size2, ColorTurn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在 OLED 显示汉字</span></span><br><span class="line"><span class="comment"> * @param x 起始横坐标</span></span><br><span class="line"><span class="comment"> * @param y 起始纵坐标</span></span><br><span class="line"><span class="comment"> * @param no 汉字编号</span></span><br><span class="line"><span class="comment"> * @param ColorTurn 是否反相显示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowChinese</span><span class="params">(<span class="type">uint8_t</span> x, <span class="type">uint8_t</span> y, <span class="type">uint8_t</span> no, <span class="type">uint8_t</span> ColorTurn)</span> &#123;</span><br><span class="line">    OLED_SetPosition(x, y);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">uint8_t</span> t = <span class="number">0</span>; t &lt; <span class="number">16</span>; t++) &#123;</span><br><span class="line">        OLED_WriteData(ColorTurn ? ~Hzk[<span class="number">2</span> * no][t] : Hzk[<span class="number">2</span> * no][t]);</span><br><span class="line">    &#125;</span><br><span class="line">    OLED_SetPosition(x, y + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">uint8_t</span> t = <span class="number">0</span>; t &lt; <span class="number">16</span>; t++) &#123;</span><br><span class="line">        OLED_WriteData(ColorTurn ? ~Hzk[<span class="number">2</span> * no + <span class="number">1</span>][t] : Hzk[<span class="number">2</span> * no + <span class="number">1</span>][t]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在指定区域绘制 BMP 图片</span></span><br><span class="line"><span class="comment"> * @param x0 图片起始横坐标</span></span><br><span class="line"><span class="comment"> * @param y0 图片起始纵坐标</span></span><br><span class="line"><span class="comment"> * @param x1 图片结束横坐标</span></span><br><span class="line"><span class="comment"> * @param y1 图片结束纵坐标</span></span><br><span class="line"><span class="comment"> * @param BMP 图片数据</span></span><br><span class="line"><span class="comment"> * @param ColorTurn 是否反相显示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_DrawBMP</span><span class="params">(<span class="type">uint8_t</span> x0, <span class="type">uint8_t</span> y0, <span class="type">uint8_t</span> x1, <span class="type">uint8_t</span> y1, <span class="type">uint8_t</span> *BMP, <span class="type">uint8_t</span> ColorTurn)</span> &#123;</span><br><span class="line">    <span class="type">uint32_t</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">uint8_t</span> y = y0; y &lt; y1; y++) &#123;</span><br><span class="line">        OLED_SetPosition(x0, y);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">uint8_t</span> x = x0; x &lt; x1; x++) &#123;</span><br><span class="line">            OLED_WriteData(ColorTurn ? ~BMP[j++] : BMP[j++]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief OLED 屏幕内容水平滚动</span></span><br><span class="line"><span class="comment"> * @param direction 滚动方向 (LEFT 或 RIGHT)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_HorizontalShift</span><span class="params">(<span class="type">uint8_t</span> direction)</span> &#123;</span><br><span class="line">    OLED_WriteCommand(<span class="number">0x2E</span>); <span class="comment">// 停止滚动</span></span><br><span class="line">    OLED_WriteCommand(direction); <span class="comment">// 设置滚动方向</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x00</span>); <span class="comment">// 虚拟字节设置</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x00</span>); <span class="comment">// 开始页地址</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x07</span>); <span class="comment">// 滚动间隔</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x07</span>); <span class="comment">// 结束页地址</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x00</span>); <span class="comment">// 虚拟字节设置</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0xFF</span>); <span class="comment">// 虚拟字节设置</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x2F</span>); <span class="comment">// 开启滚动</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief OLED 屏幕部分内容水平滚动</span></span><br><span class="line"><span class="comment"> * @param direction 滚动方向 (LEFT 或 RIGHT)</span></span><br><span class="line"><span class="comment"> * @param start 开始页地址</span></span><br><span class="line"><span class="comment"> * @param end 结束页地址</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Some_HorizontalShift</span><span class="params">(<span class="type">uint8_t</span> direction, <span class="type">uint8_t</span> start, <span class="type">uint8_t</span> end)</span> &#123;</span><br><span class="line">    OLED_WriteCommand(<span class="number">0x2E</span>); <span class="comment">// 停止滚动</span></span><br><span class="line">    OLED_WriteCommand(direction); <span class="comment">// 设置滚动方向</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x00</span>); <span class="comment">// 虚拟字节设置</span></span><br><span class="line">    OLED_WriteCommand(start); <span class="comment">// 开始页地址</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x07</span>); <span class="comment">// 设置滚动步频</span></span><br><span class="line">    OLED_WriteCommand(end); <span class="comment">// 结束页地址</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x00</span>); <span class="comment">// 虚拟字节设置</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0xFF</span>); <span class="comment">// 虚拟字节设置</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x2F</span>); <span class="comment">// 开启滚动</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief OLED 屏幕内容垂直和水平滚动</span></span><br><span class="line"><span class="comment"> * @param direction 滚动方向</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_VerticalAndHorizontalShift</span><span class="params">(<span class="type">uint8_t</span> direction)</span> &#123;</span><br><span class="line">    OLED_WriteCommand(<span class="number">0x2E</span>); <span class="comment">// 停止滚动</span></span><br><span class="line">    OLED_WriteCommand(direction); <span class="comment">// 设置滚动方向</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x01</span>); <span class="comment">// 虚拟字节设置</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x00</span>); <span class="comment">// 开始页地址</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x07</span>); <span class="comment">// 帧频</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x07</span>); <span class="comment">// 结束页地址</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x01</span>); <span class="comment">// 垂直滚动偏移量</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x00</span>); <span class="comment">// 虚拟字节设置</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0xFF</span>); <span class="comment">// 虚拟字节设置</span></span><br><span class="line">    OLED_WriteCommand(<span class="number">0x2F</span>); <span class="comment">// 开启滚动</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置 OLED 显示模式</span></span><br><span class="line"><span class="comment"> * @param mode ON (0xA7) 或 OFF (0xA6)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_DisplayMode</span><span class="params">(<span class="type">uint8_t</span> mode)</span> &#123;</span><br><span class="line">    OLED_WriteCommand(mode);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 控制 OLED 屏幕亮度</span></span><br><span class="line"><span class="comment"> * @param intensity 亮度值 (0x00~0xFF)，RESET=0x7F</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_IntensityControl</span><span class="params">(<span class="type">uint8_t</span> intensity)</span> &#123;</span><br><span class="line">    OLED_WriteCommand(<span class="number">0x81</span>); <span class="comment">// 设置对比度命令</span></span><br><span class="line">    OLED_WriteCommand(intensity); <span class="comment">// 设置对应的对比度值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>其头文件为</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> OLED_OLED_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OLED_OLED_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f1xx_hal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;oledfont.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> I2C_HandleTypeDef hi2c1; <span class="comment">// 外部 I2C 句柄，允许在其他文件中使用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 写入控制命令到 OLED</span></span><br><span class="line"><span class="comment"> * @param cmd 要发送的命令</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_WriteCommand</span><span class="params">(<span class="type">uint8_t</span> cmd)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 写入数据到 OLED</span></span><br><span class="line"><span class="comment"> * @param data 要发送的数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_WriteData</span><span class="params">(<span class="type">uint8_t</span> data)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 初始化 OLED 显示屏</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Init</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 清空 OLED 显示屏</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Clear</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 开启 OLED 显示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_DisplayOn</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 关闭 OLED 显示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_DisplayOff</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置 OLED 显示的光标位置</span></span><br><span class="line"><span class="comment"> * @param x 横坐标</span></span><br><span class="line"><span class="comment"> * @param y 纵坐标（页地址）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_SetPosition</span><span class="params">(<span class="type">uint8_t</span> x, <span class="type">uint8_t</span> y)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 打开 OLED 显示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_On</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在 OLED 显示指定位置显示整数</span></span><br><span class="line"><span class="comment"> * @param x 显示的横坐标</span></span><br><span class="line"><span class="comment"> * @param y 显示的纵坐标</span></span><br><span class="line"><span class="comment"> * @param num 要显示的数字</span></span><br><span class="line"><span class="comment"> * @param len 数字位数</span></span><br><span class="line"><span class="comment"> * @param fontSize 字体大小</span></span><br><span class="line"><span class="comment"> * @param colorInverted 是否反相显示（1：反相，0：正常）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowNum</span><span class="params">(<span class="type">uint8_t</span> x, <span class="type">uint8_t</span> y, <span class="type">unsigned</span> <span class="type">int</span> num, <span class="type">uint8_t</span> len, <span class="type">uint8_t</span> fontSize, <span class="type">uint8_t</span> colorInverted)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在 OLED 显示指定位置显示浮点数</span></span><br><span class="line"><span class="comment"> * @param x 显示的横坐标</span></span><br><span class="line"><span class="comment"> * @param y 显示的纵坐标</span></span><br><span class="line"><span class="comment"> * @param num 要显示的浮点数</span></span><br><span class="line"><span class="comment"> * @param integerLength 整数部分位数</span></span><br><span class="line"><span class="comment"> * @param decimalLength 小数部分位数</span></span><br><span class="line"><span class="comment"> * @param fontSize 字体大小</span></span><br><span class="line"><span class="comment"> * @param colorInverted 是否反相显示（1：反相，0：正常）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowDecimal</span><span class="params">(<span class="type">uint8_t</span> x, <span class="type">uint8_t</span> y, <span class="type">float</span> num, <span class="type">uint8_t</span> integerLength, <span class="type">uint8_t</span> decimalLength, <span class="type">uint8_t</span> fontSize, <span class="type">uint8_t</span> colorInverted)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在 OLED 显示指定位置显示字符</span></span><br><span class="line"><span class="comment"> * @param x 显示的横坐标</span></span><br><span class="line"><span class="comment"> * @param y 显示的纵坐标</span></span><br><span class="line"><span class="comment"> * @param chr 要显示的字符</span></span><br><span class="line"><span class="comment"> * @param charSize 字体大小（12 或 16）</span></span><br><span class="line"><span class="comment"> * @param colorInverted 是否反相显示（1：反相，0：正常）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowChar</span><span class="params">(<span class="type">uint8_t</span> x, <span class="type">uint8_t</span> y, <span class="type">uint8_t</span> chr, <span class="type">uint8_t</span> charSize, <span class="type">uint8_t</span> colorInverted)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在 OLED 显示指定位置显示字符串</span></span><br><span class="line"><span class="comment"> * @param x 显示的起始横坐标</span></span><br><span class="line"><span class="comment"> * @param y 显示的起始纵坐标</span></span><br><span class="line"><span class="comment"> * @param str 要显示的字符串</span></span><br><span class="line"><span class="comment"> * @param charSize 字体大小（12 或 16）</span></span><br><span class="line"><span class="comment"> * @param colorInverted 是否反相显示（1：反相，0：正常）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowString</span><span class="params">(<span class="type">uint8_t</span> x, <span class="type">uint8_t</span> y, <span class="type">const</span> <span class="type">char</span> *str, <span class="type">uint8_t</span> charSize, <span class="type">uint8_t</span> colorInverted)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在 OLED 显示指定位置显示汉字</span></span><br><span class="line"><span class="comment"> * @param x 显示的横坐标</span></span><br><span class="line"><span class="comment"> * @param y 显示的纵坐标</span></span><br><span class="line"><span class="comment"> * @param characterIndex 汉字编号</span></span><br><span class="line"><span class="comment"> * @param colorInverted 是否反相显示（1：反相，0：正常）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_ShowChinese</span><span class="params">(<span class="type">uint8_t</span> x, <span class="type">uint8_t</span> y, <span class="type">uint8_t</span> characterIndex, <span class="type">uint8_t</span> colorInverted)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在 OLED 指定区域显示 BMP 图片</span></span><br><span class="line"><span class="comment"> * @param x0 图片起始横坐标</span></span><br><span class="line"><span class="comment"> * @param y0 图片起始纵坐标</span></span><br><span class="line"><span class="comment"> * @param x1 图片结束横坐标</span></span><br><span class="line"><span class="comment"> * @param y1 图片结束纵坐标</span></span><br><span class="line"><span class="comment"> * @param BMP 图片数据数组</span></span><br><span class="line"><span class="comment"> * @param colorInverted 是否反相显示（1：反相，0：正常）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_DrawBMP</span><span class="params">(<span class="type">uint8_t</span> x0, <span class="type">uint8_t</span> y0, <span class="type">uint8_t</span> x1, <span class="type">uint8_t</span> y1, <span class="type">uint8_t</span> *BMP, <span class="type">uint8_t</span> colorInverted)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 屏幕内容水平滚动</span></span><br><span class="line"><span class="comment"> * @param direction 滚动方向（LEFT 或 RIGHT）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_HorizontalShift</span><span class="params">(<span class="type">uint8_t</span> direction)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 屏幕部分内容水平滚动</span></span><br><span class="line"><span class="comment"> * @param direction 滚动方向（LEFT 或 RIGHT）</span></span><br><span class="line"><span class="comment"> * @param start 开始页地址</span></span><br><span class="line"><span class="comment"> * @param end 结束页地址</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_Some_HorizontalShift</span><span class="params">(<span class="type">uint8_t</span> direction, <span class="type">uint8_t</span> start, <span class="type">uint8_t</span> end)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 屏幕内容垂直和水平滚动</span></span><br><span class="line"><span class="comment"> * @param direction 滚动方向</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_VerticalAndHorizontalShift</span><span class="params">(<span class="type">uint8_t</span> direction)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置 OLED 显示模式</span></span><br><span class="line"><span class="comment"> * @param mode ON (0xA7) 或 OFF (0xA6)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_DisplayMode</span><span class="params">(<span class="type">uint8_t</span> mode)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 控制 OLED 屏幕亮度</span></span><br><span class="line"><span class="comment"> * @param intensity 亮度值 (0x00~0xFF)，RESET=0x7F</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">OLED_IntensityControl</span><span class="params">(<span class="type">uint8_t</span> intensity)</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">/* OLED_OLED_H_ */</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="四、演示效果"><a href="#四、演示效果" class="headerlink" title="四、演示效果"></a>四、演示效果</h1><img src="/2025/01/15/OLED-IIC/vidio1.mp4" class title="vidio1.mp4">

<img src="/2025/01/15/OLED-IIC/vidio2.mp4" class title="vidio2.mp4">

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>本篇内容略少，但这也是为后期的内容做铺垫衔接。后面的内容“干货”会更多一些，敬请期待。</p>
<p>又是经过一个充实而忙碌的夜晚，深知文章中仍不免有诸多省略和未及细讲之处。对于那些在阅读过程中仍感意犹未尽、存有疑问的同学，建议大家不妨拓宽视野，多阅读几篇来自不同作者、风格各异的优秀文章。相信通过多角度、多层次的学习，你们定能集百家之长从而对单片机有更加深入和全面的理解。</p>
<p>在此，我的初衷不仅是为初学者提供一份学习路上的指引，也是对自己学习历程的一次回顾与总结。通过分享，我希望能激发更多人对单片机技术的兴趣，共同探索这片充满挑战与机遇的领域。</p>
<p>为了保持内容的连贯性和避免不必要的重复，我计划在未来的博客中，对于本文中已提及但未深入展开的话题，将通过链接的方式引导大家回到本文进行查阅。同时，我也将不断优化和完善文章内容，力求为大家提供更加准确、全面、易于理解的学习资源。</p>
<p>感谢大家的关注与支持！</p>
<hr>
<h1 id="参考文献引用"><a href="#参考文献引用" class="headerlink" title="参考文献引用"></a>参考文献引用</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/LYH6767/article/details/126032948?spm=1001.2014.3001.5501">4针0.96寸OLED的HAL库代码（硬件I2C&#x2F;全代码&#x2F;stm32f1&#x2F;CubeMX配置&#x2F;包含有正负浮点数&#x2F;100%一次点亮）</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/t230610/article/details/144005459">HAL库软件IIC、硬件IIC移植江科大0.96寸OLED屏幕代码；软件I2C和硬件I2C区别</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/as480133937/article/details/105259075">【STM32】HAL库 STM32CubeMX教程十二—IIC(读取AT24C02 )</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/t230610/article/details/144005459">HAL库软件IIC、硬件IIC移植江科大0.96寸OLED屏幕代码；软件I2C和硬件I2C区别</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2025-01-15T02:56:38.000Z" title="2025/1/15 10:56:38">2025-01-15</time></span><span class="level-item">Updated&nbsp;<time dateTime="2025-01-15T03:06:42.171Z" title="2025/1/15 11:06:42">2025-01-15</time></span><span class="level-item"><a class="link-muted" href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/">张腾跃</a><span> / </span><a class="link-muted" href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><span> / </span><a class="link-muted" href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%A1%AC%E4%BB%B6%E5%BC%80%E5%8F%91/">硬件开发</a></span><span class="level-item">21 minutes read (About 3093 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/01/15/External-KEY/">External-KEY</a></p><div class="content"><h1 id="往期内容"><a href="#往期内容" class="headerlink" title="往期内容"></a>往期内容</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_72614426/article/details/140810526?spm=1001.2014.3001.5502">STM32F1基于HAL库的学习记录实用使用教程分享(一、GPIO_Output)</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_72614426/article/details/140825815">STM32F1基于HAL库的学习记录实用使用教程分享(二、GPIO_Input 按键)</a></p>
<hr>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><code>本文记录了通过使用STM32F103ZET6单片机进行GPIO_Input的学习</code></p>
<p>随着嵌入式行业的兴起，于此记录个人的一些学习过程并进行分享，本次是单片机控制里很重要的一个概念：<strong>外部中断</strong></p>
<hr>
<p><code>声明：本文章在编写过程中，我始终致力于尊重并保护所有原创内容及其知识产权。然而，由于信息来源的多样性和复杂性，可能存在个别内容未明确标注出处、存在事实性错误或无意中侵犯了他人的知识产权的情况。对于任何可能存在的上述问题，我深感歉意，并在此提前向受影响的作者表示最诚挚的歉意。我始终秉持着尊重原创、维护知识产权的原则，绝无意侵犯任何人的合法权益。一旦收到您的反馈，我将立即核实并在第一时间内对文章进行修改。这包括但不限于补充相关引用信息、更正错误内容或删除涉嫌侵权的内容。再次感谢您的关注与支持，期待与您共同营造一个更加美好的知识共享空间。新手文章诸多不足，还望海涵。</code></p>
<h1 id="一、外部中断"><a href="#一、外部中断" class="headerlink" title="一、外部中断"></a>一、外部中断</h1><p>中断机制在计算机系统中区分为硬件中断和软件中断两大类别。<br><strong>硬件中断</strong>源自外部设备，如硬盘I&#x2F;O的信号或通过定时器到达，它们通过发送信号以异步方式请求CPU的注意，即中断的发生与CPU当前执行的程序逻辑无直接关联。<br>外部中断实际上是硬件中断的一个子集。</p>
<p><strong>软件中断</strong>是由程序内部执行的特定指令（如中断指令或系统调用）所触发，其发生时间与程序执行流程紧密相关，因此被视为同步的。</p>
<p>这两种中断机制共同协作，确保了计算机系统既能及时响应外部事件，又能灵活管理内部资源和服务调用。</p>
<h2 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h2><p>中断：打断CPU执行正常的程序，转而处理紧急程序，然后返回原暂停的程序继续运行。<br>举例：学习ing——-听到老妈叫：吃饭啦！(中断请求)——-前去干饭——-吃完了——-继续学习</p>
<h2 id="2-中断的作用"><a href="#2-中断的作用" class="headerlink" title="2.中断的作用"></a>2.中断的作用</h2><p>一般来讲，中断有三个作用：<br><strong>实时控制</strong>：当温度较高时，自动开启空调功能。<br><strong>故障处理</strong>：出现错误时及时修正。<br><strong>数据传输</strong>：串口或其他通信方式进行数据的传输</p>
<h2 id="3-中断优先级"><a href="#3-中断优先级" class="headerlink" title="3.中断优先级"></a>3.中断优先级</h2><p>在中断处理机制中，优先级系统是为确保系统资源的高效分配和紧急事件的及时处理。</p>
<p>包括抢占优先级（pre）和响应优先级（sub）两个关键层面。抢占优先级决定了中断的打断能力，即高抢占优先级的中断能够打断正在执行的低抢占优先级中断，确保紧急任务得到优先处理。而响应优先级则在抢占优先级相同的情况下发挥作用，它决定了中断的响应顺序，即响应优先级高的中断会先被执行，但不同响应优先级的中断间不能相互打断。</p>
<p>当抢占优先级和响应优先级都相同时，自然优先级（通常基于中断向量表中的位置）将作为决定因素，自然优先级越高的中断将先被执行。这里的自然优先级实质上反映了中断在硬件或固件设计中的优先级排序。</p>
<p>在中断优先级体系中，通常遵循“数值越小，优先级越高”的原则，这意味着更低数值的优先级设置代表更高的中断处理优先级，从而确保系统能够迅速响应最紧急的事件</p>
<h1 id="二、配置"><a href="#二、配置" class="headerlink" title="二、配置"></a>二、配置</h1><p>在选择好芯片并进入配置界面后的操作如下进行</p>
<h2 id="1-RCC"><a href="#1-RCC" class="headerlink" title="1.RCC"></a>1.RCC</h2><p>外部的高速和低速时钟均有三个可选项目，具体情况需根据个人的硬件情况进行个性化配置，一般选择高速时钟下的：<strong>Crystal&#x2F;Ceramic Resonator</strong>（外部晶体&#x2F;陶瓷谐振器）如图2-1所示：</p>
<img src="/2025/01/15/External-KEY/2-1.png" class title="2-1.png">
<h2 id="2-SYS"><a href="#2-SYS" class="headerlink" title="2.SYS"></a>2.SYS</h2><h3 id="1-Debug"><a href="#1-Debug" class="headerlink" title="(1).Debug"></a>(1).Debug</h3><p>在STM32CubeMX中配置系统（SYS）时，关于调试接口的设置是一个重要环节。默认情况下，调试功能可能被启用，但如果不需要实时调试或希望优化资源使用，可以选择关闭调试（即选择“No Debug”选项）。然而为了开发便利，我们一般都保留调试接口。</p>
<p>在调试协议的选择上，STM32CubeMX提供了SW（Serial Wire）和JTAG两种选项。鉴于SWD（Serial Wire Debug）模式仅需要两个引脚，且兼容性好、调试效率高，因此它是许多开发者的首选。我选择使用<strong>SW协议</strong>。</p>
<h3 id="2-System-Wake-Up"><a href="#2-System-Wake-Up" class="headerlink" title="(2).System Wake-Up"></a>(2).System Wake-Up</h3><p>System Wake-Up功能允许STM32微控制器在低功耗模式下被特定的外部事件唤醒。这些外部事件可以包括但不限于外部中断、RTC闹钟、USART接收数据等。</p>
<p>通过配置System Wake-Up功能，微控制器可以在不需要时进入<strong>低功耗模式</strong>以节省电能，同时在需要时能够快速响应外部事件并恢复正常工作。</p>
<h3 id="3-Timebase-Source"><a href="#3-Timebase-Source" class="headerlink" title="(3).Timebase Source"></a>(3).Timebase Source</h3><p>通过对 Timebase Source进行合理配置以确保程序的正确运行。通过选择合适的Timebase Source（如SysTick或TIMx），并合理配置其参数，可以实现高效、可靠的时间管理功能。</p>
<img src="/2025/01/15/External-KEY/2-2.png" class title="2-2.png">
<h2 id="3-时钟树"><a href="#3-时钟树" class="headerlink" title="3.时钟树"></a>3.时钟树</h2><p>依此点击：PLL、Enable CSS、HCLK(MHz)改为<strong>72</strong>之后回车即可。</p>
<img src="/2025/01/15/External-KEY/2-3.png" class title="2-3.png">
<h2 id="4-引脚配置"><a href="#4-引脚配置" class="headerlink" title="4.引脚配置"></a>4.引脚配置</h2><h3 id="1-选择引脚和模式"><a href="#1-选择引脚和模式" class="headerlink" title="(1).选择引脚和模式"></a>(1).选择引脚和模式</h3><p>本文是基于第一篇文章的LED后进行的操作，有不了解的同学可以移步<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_72614426/article/details/140810526?spm=1001.2014.3001.5502">STM32F1基于HAL库的学习记录实用使用教程分享(一、GPIO_Output)</a>进行配置。<br>根据硬件点击所需要使用的引脚，之后在弹窗里选择<strong>GPIO_EXIT</strong>，如图2-4 ：</p>
<img src="/2025/01/15/External-KEY/2-4.png" class title="2-4.png">
<h3 id="2-进行细节配置"><a href="#2-进行细节配置" class="headerlink" title="(2).进行细节配置"></a>(2).进行细节配置</h3><p>根据硬件进行细节配置，如图2-5 ：</p>
<h4 id="A-GPIO-mode"><a href="#A-GPIO-mode" class="headerlink" title="(A).GPIO mode"></a>(A).GPIO mode</h4><h4 id="External-Interrupt-Mode-with-Rising-edge-trigger-detection"><a href="#External-Interrupt-Mode-with-Rising-edge-trigger-detection" class="headerlink" title="External Interrupt Mode with Rising edge trigger detection"></a>External Interrupt Mode with Rising edge trigger detection</h4><p>上升沿触发外部中断</p>
<h4 id="External-Interrupt-Mode-with-Falling-edge-trigger-detection"><a href="#External-Interrupt-Mode-with-Falling-edge-trigger-detection" class="headerlink" title="External Interrupt Mode with Falling edge trigger detection"></a>External Interrupt Mode with Falling edge trigger detection</h4><p>下降沿触发外部中断</p>
<h4 id="External-Interrupt-Mode-with-Rising-Falling-edge-trigger-detection"><a href="#External-Interrupt-Mode-with-Rising-Falling-edge-trigger-detection" class="headerlink" title="External Interrupt Mode with Rising&#x2F;Falling edge trigger detection"></a>External Interrupt Mode with Rising&#x2F;Falling edge trigger detection</h4><p>上升沿或下降沿触发外部中断</p>
<h4 id="External-Event-Mode-with-Rising-edge-trigger-detection"><a href="#External-Event-Mode-with-Rising-edge-trigger-detection" class="headerlink" title="External Event Mode with Rising edge trigger detection"></a>External Event Mode with Rising edge trigger detection</h4><p>上升沿触发外部事件</p>
<h4 id="External-Event-Mode-with-Falling-edge-trigger-detection"><a href="#External-Event-Mode-with-Falling-edge-trigger-detection" class="headerlink" title="External Event Mode with Falling edge trigger detection"></a>External Event Mode with Falling edge trigger detection</h4><p>下降沿触发外部事件</p>
<h4 id="External-Event-ode-with-Rising-Falling-edge-trigger-detection"><a href="#External-Event-ode-with-Rising-Falling-edge-trigger-detection" class="headerlink" title="External Event ode with Rising&#x2F;Falling edge trigger detection"></a>External Event ode with Rising&#x2F;Falling edge trigger detection</h4><p>上升沿或下降沿触发外部事件</p>
<h4 id="B-GPIO-Pull-up-Pull-down"><a href="#B-GPIO-Pull-up-Pull-down" class="headerlink" title="(B).GPIO Pull-up&#x2F;Pull-down"></a>(B).GPIO Pull-up&#x2F;Pull-down</h4><p>通过电路的硬件结构进行上拉或下拉配置</p>
<h4 id="C-User-Laber"><a href="#C-User-Laber" class="headerlink" title="(C).User Laber"></a>(C).User Laber</h4><p>用户标号，给引脚定义一个易识别的名称，以此以提高代码的可读性和可维护性。我直接定义为：<strong>KEY</strong>(在此我仅以PE6举例，其他引脚(按键)同理)。</p>
<img src="/2025/01/15/External-KEY/2-5.png" class title="2-5.png">
<h4 id="D-配置优先级"><a href="#D-配置优先级" class="headerlink" title="(D).配置优先级"></a>(D).配置优先级</h4><h5 id="Priority-Group"><a href="#Priority-Group" class="headerlink" title="Priority Group"></a>Priority Group</h5><p>默认为4个比特位，一般情况下不需要改。</p>
<h5 id="Preemption-Priority-Sub-Priority"><a href="#Preemption-Priority-Sub-Priority" class="headerlink" title="Preemption Priority &amp; Sub Priority"></a>Preemption Priority &amp; Sub Priority</h5><p>抢占优先级，数字越小，优先级越高<br>若抢占优先级相同，判断子优先级，同样，数字越小，优先级越高</p>
<img src="/2025/01/15/External-KEY/2-6.png" class title="2-6.png">
<h2 id="6-工程项目生成"><a href="#6-工程项目生成" class="headerlink" title="6.工程项目生成"></a>6.工程项目生成</h2><h3 id="1-项目及编译器"><a href="#1-项目及编译器" class="headerlink" title="(1).项目及编译器"></a>(1).项目及编译器</h3><h4 id="A-Project-Name"><a href="#A-Project-Name" class="headerlink" title="(A).Project Name"></a>(A).Project Name</h4><p>给工程起个名字</p>
<h4 id="B-Project-Location"><a href="#B-Project-Location" class="headerlink" title="(B).Project Location"></a>(B).Project Location</h4><p>给工程选个存放位置，避免中文路径</p>
<h4 id="C-Toolchain-lDE"><a href="#C-Toolchain-lDE" class="headerlink" title="(C).Toolchain&#x2F;lDE"></a>(C).Toolchain&#x2F;lDE</h4><p>IDE选择，我在这里选择的是MDK-ARM(即Keil 5)</p>
<img src="/2025/01/15/External-KEY/2-7.png" class title="2-7.png">
<h3 id="2-代码生成"><a href="#2-代码生成" class="headerlink" title="(2).代码生成"></a>(2).代码生成</h3><p>以下配置勾选后点击界面右上角的：<strong>GENERATE CODE</strong></p>
<h4 id="A-Copy-all-used-libraries-into-the-project-folder"><a href="#A-Copy-all-used-libraries-into-the-project-folder" class="headerlink" title="(A).Copy all used libraries into the project folder"></a>(A).Copy all used libraries into the project folder</h4><p>将所有使用过的库复制到项目文件夹中 </p>
<h4 id="B-Generate-peripheral-initialization-as-a-pair-of’c-h’-files-per-peripheral"><a href="#B-Generate-peripheral-initialization-as-a-pair-of’c-h’-files-per-peripheral" class="headerlink" title="(B).Generate peripheral initialization as a pair of’c&#x2F;.h’ files per peripheral"></a>(B).Generate peripheral initialization as a pair of’c&#x2F;.h’ files per peripheral</h4><p>每个外设生成独立的’.c&#x2F;.h’文件</p>
<img src="/2025/01/15/External-KEY/2-8.png" class title="2-8.png">

<h1 id="三、程序"><a href="#三、程序" class="headerlink" title="三、程序"></a>三、程序</h1><p><strong>sys.h、led.h、stm32f1xx_it.c和stm32f10x_it.h在我的第一篇博客</strong><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_72614426/article/details/140810526?spm=1001.2014.3001.5502">STM32F1基于HAL库的学习记录实用使用教程分享(一、GPIO_Output)</a><strong>里。</strong></p>
<h2 id="1-HAL-GPIO-ReadPin-GPIO-TypeDef-GPIOx-uint16-t-GPIO-Pin"><a href="#1-HAL-GPIO-ReadPin-GPIO-TypeDef-GPIOx-uint16-t-GPIO-Pin" class="headerlink" title="1.HAL_GPIO_ReadPin(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin);"></a>1.HAL_GPIO_ReadPin(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin);</h2><p>此函数用于读取引脚状态，通过GPIO的IDR寄存器读取。<br>电平输出HAL函数<br>GPIOX代表目标引脚的端口号，例如GPIOE。<br>GPIO_Pin代表目标引脚的引脚号，例如GPIO_Pin_6。<br>在main.h中可找到宏定义：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Private defines -----------------------------------------------------------*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_Pin GPIO_PIN_6</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_GPIO_Port GPIOE</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_EXTI_IRQn EXTI9_5_IRQn</span></span><br></pre></td></tr></table></figure>
<p>设置按键回调函数为</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/* USER CODE BEGIN 4 */</span></span><br><span class="line">  <span class="type">void</span> <span class="title function_">HAL_GPIO_EXTI_Callback</span><span class="params">(<span class="type">uint16_t</span> GPIO_Pin)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span>(GPIO_Pin == KEY_Pin)</span><br><span class="line">	&#123;</span><br><span class="line">			<span class="keyword">if</span>(Exit_flag == <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">					Exit_flag = <span class="number">1</span>;</span><br><span class="line">					LED_flag = HAL_GPIO_ReadPin(KEY_GPIO_Port, KEY_Pin);</span><br><span class="line">			&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">  <span class="comment">/* USER CODE END 4 */</span></span><br></pre></td></tr></table></figure>
<p>在主函数循环内检测</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line"> &#123;</span><br><span class="line">   <span class="comment">/* USER CODE END WHILE */</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/* USER CODE BEGIN 3 */</span></span><br><span class="line">	<span class="keyword">if</span>(Exit_flag == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		Exit_flag = <span class="number">2</span>;</span><br><span class="line">		<span class="keyword">if</span>(LED_flag== GPIO_PIN_RESET)</span><br><span class="line">		&#123;</span><br><span class="line">			HAL_Delay(<span class="number">20</span>);</span><br><span class="line">			<span class="keyword">if</span>(HAL_GPIO_ReadPin(KEY_GPIO_Port, KEY_Pin) == GPIO_PIN_RESET)</span><br><span class="line">			&#123;</span><br><span class="line">				HAL_GPIO_TogglePin(LED_GPIO_Port,LED_Pin);</span><br><span class="line">				Exit_flag = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				Exit_flag = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(LED_flag== GPIO_PIN_SET)</span><br><span class="line">		&#123;</span><br><span class="line">			HAL_Delay(<span class="number">20</span>);</span><br><span class="line">			<span class="keyword">if</span>(HAL_GPIO_ReadPin(KEY_GPIO_Port, KEY_Pin) == GPIO_PIN_SET)</span><br><span class="line">			&#123;</span><br><span class="line">				HAL_GPIO_TogglePin(LED_GPIO_Port,LED_Pin);</span><br><span class="line">				Exit_flag = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				Exit_flag = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">  	 	&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>以此实现按键控制小灯状态的功能。</p>
<h1 id="四、演示效果"><a href="#四、演示效果" class="headerlink" title="四、演示效果"></a>四、演示效果</h1><img src="/2025/01/15/External-KEY/vidio.mp4" class title="vidio.mp4">



<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>本篇内容略少，但这也是为后期的内容做铺垫衔接。后面的内容“干货”会更多一些，敬请期待。</p>
<p>又是经过一个充实而忙碌的夜晚，深知文章中仍不免有诸多省略和未及细讲之处。对于那些在阅读过程中仍感意犹未尽、存有疑问的同学，建议大家不妨拓宽视野，多阅读几篇来自不同作者、风格各异的优秀文章。相信通过多角度、多层次的学习，你们定能集百家之长从而对单片机有更加深入和全面的理解。</p>
<p>在此，我的初衷不仅是为初学者提供一份学习路上的指引，也是对自己学习历程的一次回顾与总结。通过分享，我希望能激发更多人对单片机技术的兴趣，共同探索这片充满挑战与机遇的领域。</p>
<p>为了保持内容的连贯性和避免不必要的重复，我计划在未来的博客中，对于本文中已提及但未深入展开的话题，将通过链接的方式引导大家回到本文进行查阅。同时，我也将不断优化和完善文章内容，力求为大家提供更加准确、全面、易于理解的学习资源。</p>
<p>下期预告——关于**OLED屏幕（IIC）**的学习分享。</p>
<p>与此同时我计划将我的微机原理课程设计逐步分享出来</p>
<p>感谢大家的关注与支持！</p>
<hr>
<h1 id="参考文献引用"><a href="#参考文献引用" class="headerlink" title="参考文献引用"></a>参考文献引用</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/2301_79330491/article/details/137960533?ops_request_misc=%257B%2522request%255Fid%2522%253A%252268739526258447604b1f6696a6e932cd%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=68739526258447604b1f6696a6e932cd&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-137960533-null-null.142%5Ev101%5Epc_search_result_base8&utm_term=%E5%A4%96%E9%83%A8%E4%B8%AD%E6%96%AD%20HAL&spm=1018.2226.3001.4187">【STM32HAL库】外部中断</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/programmaker3/article/details/112669877">STM32 CubeMX学习：6. 按键的外部中断</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2025-01-14T17:36:39.000Z" title="2025/1/15 01:36:39">2025-01-15</time></span><span class="level-item">Updated&nbsp;<time dateTime="2025-01-14T16:44:09.150Z" title="2025/1/15 00:44:09">2025-01-15</time></span><span class="level-item"><a class="link-muted" href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/">张腾跃</a><span> / </span><a class="link-muted" href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><span> / </span><a class="link-muted" href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%A1%AC%E4%BB%B6%E5%BC%80%E5%8F%91/">硬件开发</a></span><span class="level-item">20 minutes read (About 3064 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/01/15/GPIO-input/">GPIO-input</a></p><div class="content"><h1 id="往期内容"><a href="#往期内容" class="headerlink" title="往期内容"></a>往期内容</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_72614426/article/details/140810526?spm=1001.2014.3001.5502">STM32F1基于HAL库的学习记录实用使用教程分享(一、GPIO_Output)</a></p>
<hr>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><code>本文记录了通过使用STM32F103ZET6单片机进行GPIO_Input的学习</code></p>
<p>随着嵌入式行业的兴起，于此记录个人的一些学习过程并进行分享，按键的控制即为大部分同学的第二课——<strong>按键（GPIO_Input）</strong>。</p>
<hr>
<p><code>声明：本文章在编写过程中，我始终致力于尊重并保护所有原创内容及其知识产权。然而，由于信息来源的多样性和复杂性，可能存在个别内容未明确标注出处、存在事实性错误或无意中侵犯了他人的知识产权的情况。对于任何可能存在的上述问题，我深感歉意，并在此提前向受影响的作者表示最诚挚的歉意。我始终秉持着尊重原创、维护知识产权的原则，绝无意侵犯任何人的合法权益。一旦收到您的反馈，我将立即核实并在第一时间内对文章进行修改。这包括但不限于补充相关引用信息、更正错误内容或删除涉嫌侵权的内容。再次感谢您的关注与支持，期待与您共同营造一个更加美好的知识共享空间。新手文章诸多不足，还望海涵。</code></p>
<h1 id="一、GPIO-Input"><a href="#一、GPIO-Input" class="headerlink" title="一、GPIO_Input"></a>一、GPIO_Input</h1><p>GPIO支持4种输入模式，分别为：浮空输入、上拉输入、下拉输入、模拟输入。模拟输入的部分我们留在后面的ADC部分再详谈。</p>
<h2 id="1-浮空输入-GPIO-Mode-IN-FLOATING"><a href="#1-浮空输入-GPIO-Mode-IN-FLOATING" class="headerlink" title="1.浮空输入(GPIO_Mode_IN_FLOATING)"></a>1.浮空输入(GPIO_Mode_IN_FLOATING)</h2><p>No pull-up and no pull-down</p>
<p>IO口引脚电平是真实的外部连接器件电压，电平有不确定性。</p>
<h2 id="2-上拉输入-GPIO-Mode-IPU"><a href="#2-上拉输入-GPIO-Mode-IPU" class="headerlink" title="2.上拉输入(GPIO_Mode_IPU)"></a>2.上拉输入(GPIO_Mode_IPU)</h2><p>Pull-up</p>
<p>I&#x2F;O口默认通过电阻上拉到VCC,不接外部器件时可以读出高电平</p>
<img src="/2025/01/15/GPIO-input/1-1.png" class title="1-1.png">



<h2 id="3-下拉输入-GPIO-Mode-IPD"><a href="#3-下拉输入-GPIO-Mode-IPD" class="headerlink" title="3.下拉输入(GPIO_Mode_IPD)"></a>3.下拉输入(GPIO_Mode_IPD)</h2><p>Pull-down</p>
<p>I&#x2F;O口默认通过电阻下拉到GND,不接外部器件时可以读出低电平</p>
<img src="/2025/01/15/GPIO-input/1-2.png" class title="1-2.png">
<p>图1-2 下拉输入</p>
<h2 id="4-上拉和下拉的区分"><a href="#4-上拉和下拉的区分" class="headerlink" title="4.上拉和下拉的区分"></a>4.上拉和下拉的区分</h2><p>用一句话概括：<br><strong>按键外接GND为上拉，外接VCC为下拉。</strong></p>
<h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><p><strong>上拉输入</strong>就像是给IO口里面接了一个小小的电阻，这个电阻的另一头连着电源正极（<strong>VCC</strong>）。这样一来，如果外面没接啥东西或者接了个接地的按键没按，IO口就会“知道”是高电平，就像是灯一直是亮着的状态。</p>
<p>这种设置适合那些<strong>接地</strong>的按键，因为一按按键，IO口就能“知道”电平变化，知道按键被按了。</p>
<p><strong>下拉输入</strong>也是给IO口里面接了个电阻，但这回电阻的另一头连着的是地（<strong>GND</strong>）。这样，如果外面啥也没接或者接了个接电源正极的按键没按，IO口就会“感觉”到是低电平，就像是灯一直是关着的状态。当你按下那个接电源正极的按键时，IO口就能察觉到电平的变化，知道有动作发生了。</p>
<p>下拉输入适合那些接电源<strong>正极</strong>的按键。</p>
<h1 id="二、配置"><a href="#二、配置" class="headerlink" title="二、配置"></a>二、配置</h1><p>在选择好芯片并进入配置界面后的操作如下进行</p>
<h2 id="1-RCC"><a href="#1-RCC" class="headerlink" title="1.RCC"></a>1.RCC</h2><p>外部的高速和低速时钟均有三个可选项目，具体情况需根据个人的硬件情况进行个性化配置，一般选择高速时钟下的：<strong>Crystal&#x2F;Ceramic Resonator</strong>（外部晶体&#x2F;陶瓷谐振器）如图2-1所示：</p>
<img src="/2025/01/15/GPIO-input/2-1.png" class title="2-1.png">
<h2 id="2-SYS"><a href="#2-SYS" class="headerlink" title="2.SYS"></a>2.SYS</h2><h3 id="1-Debug"><a href="#1-Debug" class="headerlink" title="(1).Debug"></a>(1).Debug</h3><p>在STM32CubeMX中配置系统（SYS）时，关于调试接口的设置是一个重要环节。默认情况下，调试功能可能被启用，但如果不需要实时调试或希望优化资源使用，可以选择关闭调试（即选择“No Debug”选项）。然而为了开发便利，我们一般都保留调试接口。</p>
<p>在调试协议的选择上，STM32CubeMX提供了SW（Serial Wire）和JTAG两种选项。鉴于SWD（Serial Wire Debug）模式仅需要两个引脚，且兼容性好、调试效率高，因此它是许多开发者的首选。我选择使用<strong>SW协议</strong>。</p>
<h3 id="2-System-Wake-Up"><a href="#2-System-Wake-Up" class="headerlink" title="(2).System Wake-Up"></a>(2).System Wake-Up</h3><p>System Wake-Up功能允许STM32微控制器在低功耗模式下被特定的外部事件唤醒。这些外部事件可以包括但不限于外部中断、RTC闹钟、USART接收数据等。</p>
<p>通过配置System Wake-Up功能，微控制器可以在不需要时进入<strong>低功耗模式</strong>以节省电能，同时在需要时能够快速响应外部事件并恢复正常工作。</p>
<h3 id="3-Timebase-Source"><a href="#3-Timebase-Source" class="headerlink" title="(3).Timebase Source"></a>(3).Timebase Source</h3><p>通过对 Timebase Source进行合理配置以确保程序的正确运行。通过选择合适的Timebase Source（如SysTick或TIMx），并合理配置其参数，可以实现高效、可靠的时间管理功能。</p>
<img src="/2025/01/15/GPIO-input/2-2.png" class title="2-2.png">
<h2 id="3-时钟树"><a href="#3-时钟树" class="headerlink" title="3.时钟树"></a>3.时钟树</h2><p>依此点击：PLL、Enable CSS、HCLK(MHz)改为<strong>72</strong>之后回车即可。</p>
<img src="/2025/01/15/GPIO-input/2-3.png" class title="2-3.png">
<h2 id="4-KEY引脚配置"><a href="#4-KEY引脚配置" class="headerlink" title="4.KEY引脚配置"></a>4.KEY引脚配置</h2><h3 id="1-选择引脚和模式"><a href="#1-选择引脚和模式" class="headerlink" title="(1).选择引脚和模式"></a>(1).选择引脚和模式</h3><p>本文是基于上一篇文章的LED后进行的操作，有不了解的同学可以移步<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_72614426/article/details/140810526?spm=1001.2014.3001.5502">STM32F1基于HAL库的学习记录实用使用教程分享(一、GPIO_Output)</a>进行配置。<br>根据硬件点击所需要使用的引脚，之后在弹窗里选择<strong>GPIO_Input</strong>，如图2-4 ：</p>
<img src="/2025/01/15/GPIO-input/2-4.png" class title="2-4.png">


<h3 id="2-进行细节配置"><a href="#2-进行细节配置" class="headerlink" title="(2).进行细节配置"></a>(2).进行细节配置</h3><p>根据硬件进行细节配置，如图2-5 ：</p>
<h4 id="A-GPIO-Pull-up-Pull-down"><a href="#A-GPIO-Pull-up-Pull-down" class="headerlink" title="(A).GPIO Pull-up&#x2F;Pull-down"></a>(A).GPIO Pull-up&#x2F;Pull-down</h4><p>通过电路的硬件结构进行上拉或下拉配置</p>
<h4 id="B-User-Laber"><a href="#B-User-Laber" class="headerlink" title="(B).User Laber"></a>(B).User Laber</h4><p>用户标号，给引脚定义一个易识别的名称，以此以提高代码的可读性和可维护性。我直接定义为：<strong>KEY_IN</strong>(在此我仅以PE6举例，其他引脚(按键)同理)。</p>
<img src="/2025/01/15/GPIO-input/2-5.png" class title="2-5.png">
<h2 id="6-工程项目生成"><a href="#6-工程项目生成" class="headerlink" title="6.工程项目生成"></a>6.工程项目生成</h2><h3 id="1-项目及编译器"><a href="#1-项目及编译器" class="headerlink" title="(1).项目及编译器"></a>(1).项目及编译器</h3><h4 id="A-Project-Name"><a href="#A-Project-Name" class="headerlink" title="(A).Project Name"></a>(A).Project Name</h4><p>给工程起个名字</p>
<h4 id="B-Project-Location"><a href="#B-Project-Location" class="headerlink" title="(B).Project Location"></a>(B).Project Location</h4><p>给工程选个存放位置，避免中文路径</p>
<h4 id="C-Toolchain-lDE"><a href="#C-Toolchain-lDE" class="headerlink" title="(C).Toolchain&#x2F;lDE"></a>(C).Toolchain&#x2F;lDE</h4><p>IDE选择，我在这里选择的是MDK-ARM(即Keil 5)</p>
<img src="/2025/01/15/GPIO-input/2-6.png" class title="2-6.png">
<h3 id="2-代码生成"><a href="#2-代码生成" class="headerlink" title="(2).代码生成"></a>(2).代码生成</h3><p>以下配置勾选后点击界面右上角的：<strong>GENERATE CODE</strong></p>
<h4 id="A-Copy-all-used-libraries-into-the-project-folder"><a href="#A-Copy-all-used-libraries-into-the-project-folder" class="headerlink" title="(A).Copy all used libraries into the project folder"></a>(A).Copy all used libraries into the project folder</h4><p>将所有使用过的库复制到项目文件夹中 </p>
<h4 id="B-Generate-peripheral-initialization-as-a-pair-of’c-h’-files-per-peripheral"><a href="#B-Generate-peripheral-initialization-as-a-pair-of’c-h’-files-per-peripheral" class="headerlink" title="(B).Generate peripheral initialization as a pair of’c&#x2F;.h’ files per peripheral"></a>(B).Generate peripheral initialization as a pair of’c&#x2F;.h’ files per peripheral</h4><p>每个外设生成独立的’.c&#x2F;.h’文件</p>
<img src="/2025/01/15/GPIO-input/2-7.png" class title="2-7.png">

<h1 id="三、程序"><a href="#三、程序" class="headerlink" title="三、程序"></a>三、程序</h1><p><strong>sys.h、led.h、stm32f1xx_it.c和stm32f10x_it.h在我的第一篇博客</strong><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_72614426/article/details/140810526?spm=1001.2014.3001.5502">STM32F1基于HAL库的学习记录实用使用教程分享(一、GPIO_Output)</a><strong>里。</strong></p>
<h2 id="1-HAL-GPIO-ReadPin-GPIO-TypeDef-GPIOx-uint16-t-GPIO-Pin"><a href="#1-HAL-GPIO-ReadPin-GPIO-TypeDef-GPIOx-uint16-t-GPIO-Pin" class="headerlink" title="1.HAL_GPIO_ReadPin(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin);"></a>1.HAL_GPIO_ReadPin(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin);</h2><p>此函数用于读取引脚状态，通过GPIO的IDR寄存器读取。<br>电平输出HAL函数<br>GPIOX代表目标引脚的端口号，例如GPIOE。<br>GPIO_Pin代表目标引脚的引脚号，例如GPIO_Pin_6。<br>由于我在User Laber中已将PE6定义标签“KEY_IN”故在main.h中可找到宏定义：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Private defines -----------------------------------------------------------*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_IN_Pin GPIO_PIN_6</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> KEY_IN_GPIO_Port GPIOE</span></span><br></pre></td></tr></table></figure>
<p>故按键的检测程序为</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* USER CODE BEGIN WHILE */</span></span><br><span class="line"><span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">/* USER CODE END WHILE */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* USER CODE BEGIN 3 */</span></span><br><span class="line"> <span class="comment">//有按键(PE6)按下</span></span><br><span class="line"> <span class="keyword">if</span>(HAL_GPIO_ReadPin(KEY_IN_GPIO_Port,KEY_IN_Pin) == GPIO_PIN_RESET)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="comment">/* 软件消抖 */</span></span><br><span class="line">  HAL_Delay(<span class="number">20</span>);	  </span><br><span class="line">  <span class="comment">/* 等待按键1松开 */</span></span><br><span class="line">  <span class="keyword">while</span>(HAL_GPIO_ReadPin(KEY_IN_GPIO_Port,KEY_IN_Pin) != GPIO_PIN_SET);<span class="comment">//当按键松开后才执行后续程序，否则将不断在while里循环	</span></span><br><span class="line">  HAL_GPIO_TogglePin(LED_GPIO_Port,LED_Pin);<span class="comment">/* 翻转LED*/</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* USER CODE END 3 */</span></span><br></pre></td></tr></table></figure>
<p>以此实现按键控制小灯状态的功能。</p>
<h2 id="2-按键消抖"><a href="#2-按键消抖" class="headerlink" title="2.按键消抖"></a>2.按键消抖</h2><h3 id="方法一：软件消抖"><a href="#方法一：软件消抖" class="headerlink" title="方法一：软件消抖"></a>方法一：软件消抖</h3><p>一般来讲，大部分的消抖方案是使用10~20ms的延时程序进行消抖，这是由于在使用机械按键的时候会产生不稳定的前沿抖动，若不消去抖动的话，在CPU的高速运行状态下极易出现判断失误，当抖动消失后再一次检测键的状态，如果仍保持新电平状态，则确认为真正有键按下。如下代码为普遍的写法逻辑。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//有按键(PE6)按下</span></span><br><span class="line"> <span class="keyword">if</span>(HAL_GPIO_ReadPin(KEY_IN_GPIO_Port,KEY_IN_Pin) == GPIO_PIN_RESET)</span><br><span class="line"> &#123;</span><br><span class="line">  <span class="comment">/* 软件消抖 */</span></span><br><span class="line">  HAL_Delay(<span class="number">20</span>);	  </span><br><span class="line">  <span class="comment">/* 等待按键1松开 */</span></span><br><span class="line">  <span class="keyword">if</span>(HAL_GPIO_ReadPin(KEY_IN_GPIO_Port,KEY_IN_Pin) == GPIO_PIN_RESET)</span><br><span class="line">  &#123;</span><br><span class="line">  HAL_GPIO_TogglePin(LED_GPIO_Port,LED_Pin);<span class="comment">/* 翻转LED*/</span></span><br><span class="line">  <span class="keyword">while</span>(HAL_GPIO_ReadPin(KEY_IN_GPIO_Port,KEY_IN_Pin) != GPIO_PIN_SET);<span class="comment">//当按键松开后才执行后续程序，否则将不断在while里循环</span></span><br><span class="line">  &#125;  	</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">/* USER CODE END 3 */</span></span><br></pre></td></tr></table></figure>
<h3 id="方法二：硬件消抖"><a href="#方法二：硬件消抖" class="headerlink" title="方法二：硬件消抖"></a>方法二：硬件消抖</h3><p>在学习的过程中，我了解到在按键数量不大的情况下可以使用RS触发器进行消抖操作。为了深入理解，我选择用Proteus进行仿真观察一下，如图3-1。由于精力的原因，没做成动画，仅是简单进行截图演示。</p>
<img src="/2025/01/15/GPIO-input/3-1.png" class title="3-1.png">
<p>对于RS触发器的原理，简单概括为即使有抖动但是在经过双稳态电路之后，便可输出“漂亮”的矩形波<br>其对比效果如下图，黄色为RS触发器，蓝色为普通的按键：</p>
<img src="/2025/01/15/GPIO-input/3-2.png" class title="3-2.png">
<img src="/2025/01/15/GPIO-input/3-3.png" class title="3-3.png">
<h2 id="3-其他方法"><a href="#3-其他方法" class="headerlink" title="3.其他方法"></a>3.其他方法</h2><p>由于在程序代码中，添加过多延时会浪费CPU资源，造成影响其他功能的使用并产生实时数据滞后性的可能。在后期我将介绍利用中断和ADC的方式进行按键的判断。而在实际应用中，这些方法往往更常用更好用。</p>
<h1 id="四、演示效果"><a href="#四、演示效果" class="headerlink" title="四、演示效果"></a>四、演示效果</h1><img src="/2025/01/15/GPIO-input/vidio.mp4" class title="vidio.mp4">


<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>本篇内容略少，但这也是为后期的内容做铺垫衔接。后面的关键按键的内容“干货”会更多一些，敬请期待。</p>
<p>又是经过一个充实而忙碌的夜晚，深知文章中仍不免有诸多省略和未及细讲之处。对于那些在阅读过程中仍感意犹未尽、存有疑问的同学，建议大家不妨拓宽视野，多阅读几篇来自不同作者、风格各异的优秀文章。相信通过多角度、多层次的学习，你们定能集百家之长从而对单片机有更加深入和全面的理解。</p>
<p>在此，我的初衷不仅是为初学者提供一份学习路上的指引，也是对自己学习历程的一次回顾与总结。通过分享，我希望能激发更多人对单片机技术的兴趣，共同探索这片充满挑战与机遇的领域。</p>
<p>为了保持内容的连贯性和避免不必要的重复，我计划在未来的博客中，对于本文中已提及但未深入展开的话题，将通过链接的方式引导大家回到本文进行查阅。同时，我也将不断优化和完善文章内容，力求为大家提供更加准确、全面、易于理解的学习资源。</p>
<p>下期预告——关于<strong>外部中断和对于双击和长按方法</strong>的检测的学习分享。</p>
<p>感谢大家的关注与支持！</p>
<hr>
<h1 id="参考文献引用"><a href="#参考文献引用" class="headerlink" title="参考文献引用"></a>参考文献引用</h1><p><a target="_blank" rel="noopener" href="https://doc.embedfire.com/fpga/altera/ep4ce10_pro/zh/latest/code/key_filter.html">【野火】按键消抖模块的设计与验证</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2025-01-14T14:45:07.000Z" title="2025/1/14 22:45:07">2025-01-14</time></span><span class="level-item">Updated&nbsp;<time dateTime="2025-01-14T16:44:06.692Z" title="2025/1/15 00:44:06">2025-01-15</time></span><span class="level-item"><a class="link-muted" href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/">张腾跃</a><span> / </span><a class="link-muted" href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><span> / </span><a class="link-muted" href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%A1%AC%E4%BB%B6%E5%BC%80%E5%8F%91/">硬件开发</a></span><span class="level-item">28 minutes read (About 4251 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/01/14/GPIO-output/">GPIO-output</a></p><div class="content"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><code>本文记录了通过使用STM32F103ZET6单片机进行GPIO_Output的学习</code><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_72614426/article/details/140810526?ops_request_misc=&request_id=&biz_id=102&utm_term=STM32F1%E5%9F%BA%E4%BA%8EHAL%E5%BA%93&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-0-140810526.142%5Ev101%5Epc_search_result_base8&spm=1018.2226.3001.4187">本文原链接</a><br>随着嵌入式行业的兴起，于此记录个人的一些学习过程并进行分享，LED的控制即为大部分同学的第一课——<strong>点灯（GPIO_Output）</strong>。</p>
<p>本系列对于各个软件的下载及部分配置过程将带过，有需要的同学可以参考其他的博客和经验分享。</p>
<p>本系列使用的芯片有STM32F103C8T6、STM32F103ZET6、STM32F743VIT6。大部分为基于<strong>STM32F103ZET6</strong>单片机。</p>
<p>常使用的软件包括但不限于：STM32CubeMX6.11.1、STM32CubeIDE 1.15.1、MDK-ARM 5.35、嘉立创EDA(专业版)、SOLIDWORKS 2021、OpenMV IDE、PyCharm、Anaconda。</p>
<hr>
<p><code>声明：本文章在编写过程中，我始终致力于尊重并保护所有原创内容及其知识产权。然而，由于信息来源的多样性和复杂性，可能存在个别内容未明确标注出处、存在事实性错误或无意中侵犯了他人的知识产权的情况。对于任何可能存在的上述问题，我深感歉意，并在此提前向受影响的作者表示最诚挚的歉意。我始终秉持着尊重原创、维护知识产权的原则，绝无意侵犯任何人的合法权益。一旦收到您的反馈，我将立即核实并在第一时间内对文章进行修改。这包括但不限于补充相关引用信息、更正错误内容或删除涉嫌侵权的内容。再次感谢您的关注与支持，期待与您共同营造一个更加美好的知识共享空间。新手文章诸多不足，还望海涵</code></p>
<h1 id="一、GPIO-Output"><a href="#一、GPIO-Output" class="headerlink" title="一、GPIO_Output"></a>一、GPIO_Output</h1><p>GPIO支持4种输出模式，分别为：推挽输出、开漏输出、推挽复用输出、开漏复用输出。其后两种复用输出模式一般都是用于外设使用，本文不做过多介绍。</p>
<h2 id="1-推挽输出-Output-Push-Pull"><a href="#1-推挽输出-Output-Push-Pull" class="headerlink" title="1.推挽输出(Output Push Pull)"></a>1.推挽输出(Output Push Pull)</h2><p>推挽输出同时在标准库里也叫做：GPIO_Mode_Out_PP<br>推挽复用输出同时在标准库里也叫做：GPIO_Mode_Out_PP</p>
<p>IO口输出0或1。一般情况下都是选取这种模式。该模式可以输出高低电平，连接外部数字器件进行控制。</p>
<p>在推挽输出状态下，如果高电平和低电平直接连接在一起，会导致<strong>短路电流流入</strong>(倒灌)，这极有可能会损坏设备。（由此造成过惨痛的教训）</p>
<h2 id="2-开漏输出-Output-Open-Drain"><a href="#2-开漏输出-Output-Open-Drain" class="headerlink" title="2.开漏输出(Output Open Drain)"></a>2.开漏输出(Output Open Drain)</h2><p>开漏输出同时在标准库里也叫做：GPIO_Mode_Out_OD<br>开漏复用输出同时在标准库里也叫做：GPIO_Mode_AF_OD</p>
<p>I&#x2F;O口输出0或1。在没有连接上拉电阻的情况下，该接口<strong>只能输出低电平</strong>，而无法驱动高电平。要实现高电平输出，必须借助外部的<strong>上拉电阻</strong>。需要注意的是，I&#x2F;O口的实际电平与输出电平可能不一致，这取决于连接的上拉电阻。</p>
<p>开漏输出的一个重要优势是能够灵活地调节输出电平，因为输出电平由上拉电阻所连接的电源电压来决定。因此，开漏输出一般用于需要<strong>电平转换</strong>的场合。</p>
<p>开漏输出的另一个好处在于可以实现**”线与”**功能，所谓的”线与”指的是多个信号线直接连接在一起，只有当所有信号全部为高电平时，合在一起的总线为高电平；只要有任意一个或者多个信号为低电平，则总线为低电平。</p>
<h1 id="二、配置"><a href="#二、配置" class="headerlink" title="二、配置"></a>二、配置</h1><p>在选择好芯片并进入配置界面后的操作如下进行</p>
<h2 id="1-RCC"><a href="#1-RCC" class="headerlink" title="1.RCC"></a>1.RCC</h2><p>外部的高速和低速时钟均有三个可选项目，具体情况需根据个人的硬件情况进行个性化配置，一般选择高速时钟下的：<strong>Crystal&#x2F;Ceramic Resonator</strong>（外部晶体&#x2F;陶瓷谐振器）如图2-1所示：</p>
<img src="/2025/01/14/GPIO-output/2-1.png" class title="2-1.png">
<h2 id="2-SYS"><a href="#2-SYS" class="headerlink" title="2.SYS"></a>2.SYS</h2><h3 id="1-Debug"><a href="#1-Debug" class="headerlink" title="(1).Debug"></a>(1).Debug</h3><p>在STM32CubeMX中配置系统（SYS）时，关于调试接口的设置是一个重要环节。默认情况下，调试功能可能被启用，但如果不需要实时调试或希望优化资源使用，可以选择关闭调试（即选择“No Debug”选项）。然而为了开发便利，我们一般都保留调试接口。</p>
<p>在调试协议的选择上，STM32CubeMX提供了SW（Serial Wire）和JTAG两种选项。鉴于SWD（Serial Wire Debug）模式仅需要两个引脚，且兼容性好、调试效率高，因此它是许多开发者的首选。我选择使用<strong>SW协议</strong>。</p>
<h3 id="2-System-Wake-Up"><a href="#2-System-Wake-Up" class="headerlink" title="(2).System Wake-Up"></a>(2).System Wake-Up</h3><p>System Wake-Up功能允许STM32微控制器在低功耗模式下被特定的外部事件唤醒。这些外部事件可以包括但不限于外部中断、RTC闹钟、USART接收数据等。</p>
<p>通过配置System Wake-Up功能，微控制器可以在不需要时进入<strong>低功耗模式</strong>以节省电能，同时在需要时能够快速响应外部事件并恢复正常工作。</p>
<h3 id="3-Timebase-Source"><a href="#3-Timebase-Source" class="headerlink" title="(3).Timebase Source"></a>(3).Timebase Source</h3><p>通过对 Timebase Source进行合理配置以确保程序的正确运行。通过选择合适的Timebase Source（如SysTick或TIMx），并合理配置其参数，可以实现高效、可靠的时间管理功能。</p>
<img src="/2025/01/14/GPIO-output/2-2.png" class title="2-2">
<h2 id="3-时钟树"><a href="#3-时钟树" class="headerlink" title="3.时钟树"></a>3.时钟树</h2><p>依此点击：PLL、Enable CSS、HCLK(MHz)改为<strong>72</strong>之后回车即可。</p>
<img src="/2025/01/14/GPIO-output/2-3.png" class title="2-3.png">
<h2 id="4-LED引脚配置"><a href="#4-LED引脚配置" class="headerlink" title="4.LED引脚配置"></a>4.LED引脚配置</h2><h3 id="1-选择引脚和模式"><a href="#1-选择引脚和模式" class="headerlink" title="(1).选择引脚和模式"></a>(1).选择引脚和模式</h3><p>根据硬件点击所需要使用的引脚，之后在弹窗里选择<strong>GPIO_Output</strong>，如图2-4 ：</p>
<img src="/2025/01/14/GPIO-output/2-4.png" class title="2-4.png">
<h3 id="2-进行细节配置"><a href="#2-进行细节配置" class="headerlink" title="(2).进行细节配置"></a>(2).进行细节配置</h3><p>根据硬件进行细节配置，如图2-5 ：</p>
<h4 id="A-GPIO-output-level"><a href="#A-GPIO-output-level" class="headerlink" title="(A).GPIO output level"></a>(A).GPIO output level</h4><p>Low ：IO初始化默认输出低电平<br>High：IO初始化默认输出高电平</p>
<h4 id="B-GPIO-mode"><a href="#B-GPIO-mode" class="headerlink" title="(B).GPIO mode"></a>(B).GPIO mode</h4><p>Output Open Drain，开漏输出<br>Output Push Pull   ，推挽输出</p>
<h4 id="C-GPIO-Pull-up-Pull-down"><a href="#C-GPIO-Pull-up-Pull-down" class="headerlink" title="(C).GPIO Pull-up&#x2F;Pull-down"></a>(C).GPIO Pull-up&#x2F;Pull-down</h4><p>No pull-up and no pull-down，浮空输入，配置为不上拉和下拉<br>Pull-up，上拉输入<br>Pull-down，下拉输入</p>
<h4 id="D-Maximum-output-speed"><a href="#D-Maximum-output-speed" class="headerlink" title="(D).Maximum output speed"></a>(D).Maximum output speed</h4><p>Low，GPIO速度为低速，通常为2MHZ<br>Medium，GPIO速度为中速，通常为10MHZ<br>High，GPIO速度为高速，通常为50MHZ</p>
<h4 id="E-User-Laber"><a href="#E-User-Laber" class="headerlink" title="(E).User Laber"></a>(E).User Laber</h4><p>用户标号，给引脚定义一个易识别的名称，以此以提高代码的可读性和可维护性。我直接定义为：<strong>LED</strong>。</p>
<img src="/2025/01/14/GPIO-output/2-5.png" class title="2-5.png">
<h2 id="5-基本定时器（TIM6、TIM7）配置"><a href="#5-基本定时器（TIM6、TIM7）配置" class="headerlink" title="5.基本定时器（TIM6、TIM7）配置"></a>5.基本定时器（TIM6、TIM7）配置</h2><h3 id="1-勾选Activated"><a href="#1-勾选Activated" class="headerlink" title="(1).勾选Activated"></a>(1).勾选Activated</h3><h3 id="2-Prescaler-PSC-16-bits-value"><a href="#2-Prescaler-PSC-16-bits-value" class="headerlink" title="(2).Prescaler (PSC -16 bits value)"></a>(2).Prescaler (PSC -16 bits value)</h3><p>PSC即为<strong>预分频</strong>，其参数配置支持 1~65536<br>我在这里使用<strong>7199</strong></p>
<h3 id="3-Counter-Period-AutoReload-Register-16-bits-value"><a href="#3-Counter-Period-AutoReload-Register-16-bits-value" class="headerlink" title="(3).Counter Period (AutoReload Register - 16 bits value )"></a>(3).Counter Period (AutoReload Register - 16 bits value )</h3><p>ARR是一个16位的寄存器，这里装着计数器能计数的最大数值。当计数到这个值的时候，如果使能了中断的话，定时器就会产生<strong>溢出中断</strong>。<br>我在这里使用<strong>99</strong></p>
<h3 id="4-auto-reload-preload"><a href="#4-auto-reload-preload" class="headerlink" title="(4).auto-reload preload"></a>(4).auto-reload preload</h3><p>自动重装载预加载，在此选择Enable</p>

<h3 id="5-NVIC-Settings"><a href="#5-NVIC-Settings" class="headerlink" title="(5).NVIC Settings"></a>(5).NVIC Settings</h3><p>开启TIM6<strong>中断</strong></p>
<img src="/2025/01/14/GPIO-output/2-7.png" class title="2-7.png">
<h2 id="6-定时时间计算"><a href="#6-定时时间计算" class="headerlink" title="6.定时时间计算"></a>6.定时时间计算</h2><h3 id="1-Tout-ARR-1-PSC-1-Tclk"><a href="#1-Tout-ARR-1-PSC-1-Tclk" class="headerlink" title="(1).Tout&#x3D;((ARR+1)*(PSC+1))&#x2F;Tclk"></a>(1).Tout&#x3D;((ARR+1)*(PSC+1))&#x2F;Tclk</h3><p>Tclk为定时器挂载的时钟线的频率。对于STM32F103而言最高为72Mhz（根据自己的设置有关），具体看配置的时钟树。</p>
<p>在这里我们的<strong>溢出时间</strong>为：((7199+1)*(99+1))&#x2F;72us&#x3D;10000us&#x3D;<strong>10ms</strong></p>
<h2 id="7-工程项目生成"><a href="#7-工程项目生成" class="headerlink" title="7.工程项目生成"></a>7.工程项目生成</h2><h3 id="1-项目及编译器"><a href="#1-项目及编译器" class="headerlink" title="(1).项目及编译器"></a>(1).项目及编译器</h3><h4 id="A-Project-Name"><a href="#A-Project-Name" class="headerlink" title="(A).Project Name"></a>(A).Project Name</h4><p>给工程起个名字</p>
<h4 id="B-Project-Location"><a href="#B-Project-Location" class="headerlink" title="(B).Project Location"></a>(B).Project Location</h4><p>给工程选个存放位置，避免中文路径</p>
<h4 id="C-Toolchain-lDE"><a href="#C-Toolchain-lDE" class="headerlink" title="(C).Toolchain&#x2F;lDE"></a>(C).Toolchain&#x2F;lDE</h4><p>IDE选择，我在这里选择的是MDK-ARM(即Keil 5)</p>
<img src="/2025/01/14/GPIO-output/2-8.png" class title="2-8.png">
<h3 id="2-代码生成"><a href="#2-代码生成" class="headerlink" title="(2).代码生成"></a>(2).代码生成</h3><p>以下配置勾选后点击界面右上角的：<strong>GENERATE CODE</strong></p>
<h4 id="A-Copy-all-used-libraries-into-the-project-folder"><a href="#A-Copy-all-used-libraries-into-the-project-folder" class="headerlink" title="(A).Copy all used libraries into the project folder"></a>(A).Copy all used libraries into the project folder</h4><p>将所有使用过的库复制到项目文件夹中 </p>
<h4 id="B-Generate-peripheral-initialization-as-a-pair-of’c-h’-files-per-peripheral"><a href="#B-Generate-peripheral-initialization-as-a-pair-of’c-h’-files-per-peripheral" class="headerlink" title="(B).Generate peripheral initialization as a pair of’c&#x2F;.h’ files per peripheral"></a>(B).Generate peripheral initialization as a pair of’c&#x2F;.h’ files per peripheral</h4><p>每个外设生成独立的’.c&#x2F;.h’文件</p>
<img src="/2025/01/14/GPIO-output/2-9.png" class title="2-9.png">

<h1 id="三、程序"><a href="#三、程序" class="headerlink" title="三、程序"></a>三、程序</h1><h2 id="1-HAL-GPIO-WritePin-GPIO-TypeDef-GPIOX-uint16-t-GPIO-Pin-GPIO-PinState-pinstate"><a href="#1-HAL-GPIO-WritePin-GPIO-TypeDef-GPIOX-uint16-t-GPIO-Pin-GPIO-PinState-pinstate" class="headerlink" title="1.HAL_GPIO_WritePin(GPIO_TypeDef* GPIOX,uint16_t GPIO_Pin,GPIO_PinState pinstate);"></a>1.HAL_GPIO_WritePin(GPIO_TypeDef* GPIOX,uint16_t GPIO_Pin,GPIO_PinState pinstate);</h2><p>电平输出HAL函数<br>GPIOX代表目标引脚的端口号，例如GPIOC。<br>GPIO_Pin代表目标引脚的引脚号，例如GPIO_Pin_13。<br>pinstate代表当前引脚的高低电平，一般来讲：<br>高电平(GPIO_PIN_SET)、低电平(GPIO_PIN_RESET)。<br>由于我在User Laber中已将PC13定义标签“LED”故在main.h中可找到宏定义：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Private defines -----------------------------------------------------------*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LED_Pin GPIO_PIN_13</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LED_GPIO_Port GPIOC</span></span><br></pre></td></tr></table></figure>
<p>故令小灯闪烁的程序为</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line"> &#123;</span><br><span class="line">   <span class="comment">/* USER CODE END WHILE */</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">/* USER CODE BEGIN 3 */</span>		</span><br><span class="line">HAL_GPIO_WritePin(LED_GPIO_Port,LED_Pin,GPIO_PIN_SET);<span class="comment">//点亮小灯</span></span><br><span class="line">HAL_Delay(<span class="number">1000</span>);<span class="comment">//延时1秒（1000毫秒）</span></span><br><span class="line">HAL_GPIO_WritePin(LED_GPIO_Port,LED_Pin,GPIO_PIN_RESET);<span class="comment">//熄灭小灯</span></span><br><span class="line">HAL_Delay(<span class="number">1000</span>);<span class="comment">//延时1秒（1000毫秒）</span></span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">/* USER CODE END 3 */</span></span><br></pre></td></tr></table></figure>
<p>以此实现小灯1秒内的循环闪烁效果</p>
<h2 id="2-HAL-GPIO-TogglePin-GPIO-TypeDef-GPIOX-uint16-t-GPIO-Pin"><a href="#2-HAL-GPIO-TogglePin-GPIO-TypeDef-GPIOX-uint16-t-GPIO-Pin" class="headerlink" title="2.HAL_GPIO_TogglePin(GPIO_TypeDef* GPIOX,uint16_t GPIO_Pin);"></a>2.HAL_GPIO_TogglePin(GPIO_TypeDef* GPIOX,uint16_t GPIO_Pin);</h2><p>电平翻转HAL函数</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">/* USER CODE END WHILE */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* USER CODE BEGIN 3 */</span>			</span><br><span class="line">HAL_GPIO_TogglePin(LED_GPIO_Port,LED_Pin);<span class="comment">//反转小灯</span></span><br><span class="line">HAL_Delay(<span class="number">1000</span>);<span class="comment">//延时1秒（1000毫秒）</span></span><br><span class="line">&#125;</span><br><span class="line">  <span class="comment">/* USER CODE END 3 */</span></span><br></pre></td></tr></table></figure>
<p>以此写法也可以实现每秒翻转一次小灯状态。</p>
<h2 id="3-LED-LED"><a href="#3-LED-LED" class="headerlink" title="3.LED&#x3D;!LED;"></a>3.LED&#x3D;!LED;</h2><p>该写法来源是参考标准库的写法，在后续其他的代码参考与移植中可以变得便利一些。<br>毕竟标准库的例程和开源程序还是有很多的。</p>
<p>同时作为我的学习过程记录备份和代码整体结构的学习记录分享。</p>
<h3 id="1-sys-h"><a href="#1-sys-h" class="headerlink" title="(1).sys.h"></a>(1).sys.h</h3><p>新建一个<strong>sys.h</strong>文件并写入以下内容并在外部调用：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __SYS_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __SYS_H	  </span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f1xx_hal.h&quot;</span></span></span><br><span class="line"><span class="comment">//0,不支持OS</span></span><br><span class="line"><span class="comment">//1,支持OS</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SYSTEM_SUPPORT_OS		0		<span class="comment">//定义系统文件夹是否支持OS</span></span></span><br><span class="line">	 </span><br><span class="line"><span class="comment">//位带操作,实现51类似的GPIO控制功能</span></span><br><span class="line"><span class="comment">//具体实现思想,参考&lt;&lt;CM3权威指南&gt;&gt;第五章(87页~92页).</span></span><br><span class="line"><span class="comment">//IO口操作宏定义</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BITBAND(addr, bitnum) ((addr &amp; 0xF0000000)+0x2000000+((addr &amp;0xFFFFF)&lt;&lt;5)+(bitnum&lt;&lt;2)) </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MEM_ADDR(addr)  *((volatile unsigned long  *)(addr)) </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BIT_ADDR(addr, bitnum)   MEM_ADDR(BITBAND(addr, bitnum)) </span></span><br><span class="line"><span class="comment">//IO口地址映射</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIOA_ODR_Addr    (GPIOA_BASE+12) <span class="comment">//0x4001080C </span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIOB_ODR_Addr    (GPIOB_BASE+12) <span class="comment">//0x40010C0C </span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIOC_ODR_Addr    (GPIOC_BASE+12) <span class="comment">//0x4001100C </span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIOD_ODR_Addr    (GPIOD_BASE+12) <span class="comment">//0x4001140C </span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIOE_ODR_Addr    (GPIOE_BASE+12) <span class="comment">//0x4001180C </span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIOF_ODR_Addr    (GPIOF_BASE+12) <span class="comment">//0x40011A0C    </span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIOG_ODR_Addr    (GPIOG_BASE+12) <span class="comment">//0x40011E0C    </span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIOA_IDR_Addr    (GPIOA_BASE+8) <span class="comment">//0x40010808 </span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIOB_IDR_Addr    (GPIOB_BASE+8) <span class="comment">//0x40010C08 </span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIOC_IDR_Addr    (GPIOC_BASE+8) <span class="comment">//0x40011008 </span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIOD_IDR_Addr    (GPIOD_BASE+8) <span class="comment">//0x40011408 </span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIOE_IDR_Addr    (GPIOE_BASE+8) <span class="comment">//0x40011808 </span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIOF_IDR_Addr    (GPIOF_BASE+8) <span class="comment">//0x40011A08 </span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIOG_IDR_Addr    (GPIOG_BASE+8) <span class="comment">//0x40011E08 </span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//IO口操作,只对单一的IO口!</span></span><br><span class="line"><span class="comment">//确保n的值小于16!</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PAout(n)   BIT_ADDR(GPIOA_ODR_Addr,n)  <span class="comment">//输出</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PAin(n)    BIT_ADDR(GPIOA_IDR_Addr,n)  <span class="comment">//输入</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PBout(n)   BIT_ADDR(GPIOB_ODR_Addr,n)  <span class="comment">//输出</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PBin(n)    BIT_ADDR(GPIOB_IDR_Addr,n)  <span class="comment">//输入</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PCout(n)   BIT_ADDR(GPIOC_ODR_Addr,n)  <span class="comment">//输出</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PCin(n)    BIT_ADDR(GPIOC_IDR_Addr,n)  <span class="comment">//输入</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PDout(n)   BIT_ADDR(GPIOD_ODR_Addr,n)  <span class="comment">//输出</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PDin(n)    BIT_ADDR(GPIOD_IDR_Addr,n)  <span class="comment">//输入</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PEout(n)   BIT_ADDR(GPIOE_ODR_Addr,n)  <span class="comment">//输出</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PEin(n)    BIT_ADDR(GPIOE_IDR_Addr,n)  <span class="comment">//输入</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PFout(n)   BIT_ADDR(GPIOF_ODR_Addr,n)  <span class="comment">//输出</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PFin(n)    BIT_ADDR(GPIOF_IDR_Addr,n)  <span class="comment">//输入</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PGout(n)   BIT_ADDR(GPIOG_ODR_Addr,n)  <span class="comment">//输出</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PGin(n)    BIT_ADDR(GPIOG_IDR_Addr,n)  <span class="comment">//输入</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Ex_NVIC_Config专用定义</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO_A 0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO_B 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO_C 2</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO_D 3</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO_E 4</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO_F 5</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO_G 6 </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> FTIR   1  <span class="comment">//下降沿触发</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RTIR   2  <span class="comment">//上升沿触发</span></span></span><br><span class="line">								   </span><br><span class="line"></span><br><span class="line"><span class="comment">//JTAG模式设置定义</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> JTAG_SWD_DISABLE   0X02</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SWD_ENABLE         0X01</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> JTAG_SWD_ENABLE    0X00	</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int32_t</span>  s32;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int16_t</span> s16;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int8_t</span>  s8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">const</span> <span class="type">int32_t</span> sc32;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">const</span> <span class="type">int16_t</span> sc16;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">const</span> <span class="type">int8_t</span> sc8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> __IO <span class="type">int32_t</span>  vs32;</span><br><span class="line"><span class="keyword">typedef</span> __IO <span class="type">int16_t</span>  vs16;</span><br><span class="line"><span class="keyword">typedef</span> __IO <span class="type">int8_t</span>   vs8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> __I <span class="type">int32_t</span> vsc32;</span><br><span class="line"><span class="keyword">typedef</span> __I <span class="type">int16_t</span> vsc16;</span><br><span class="line"><span class="keyword">typedef</span> __I <span class="type">int8_t</span> vsc8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">uint32_t</span>  u32;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">uint16_t</span> u16;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">uint8_t</span>  u8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">const</span> <span class="type">uint32_t</span> uc32;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">const</span> <span class="type">uint16_t</span> uc16;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">const</span> <span class="type">uint8_t</span> uc8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> __IO <span class="type">uint32_t</span>  vu32;</span><br><span class="line"><span class="keyword">typedef</span> __IO <span class="type">uint16_t</span> vu16;</span><br><span class="line"><span class="keyword">typedef</span> __IO <span class="type">uint8_t</span>  vu8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> __I <span class="type">uint32_t</span> vuc32;</span><br><span class="line"><span class="keyword">typedef</span> __I <span class="type">uint16_t</span> vuc16;</span><br><span class="line"><span class="keyword">typedef</span> __I <span class="type">uint8_t</span> vuc8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2-led-h"><a href="#2-led-h" class="headerlink" title="(2).led.h"></a>(2).led.h</h3><p>新建一个<strong>led.h</strong>文件并写入以下内容并在外部调用：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __LED_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __LED_H	 </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;sys.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LED PCout(13)	</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>将PC13引脚进行宏定义 命名为LED</p>
<h3 id="3-stm32f1xx-it-c和stm32f10x-it-h"><a href="#3-stm32f1xx-it-c和stm32f10x-it-h" class="headerlink" title="(3).stm32f1xx_it.c和stm32f10x_it.h"></a>(3).stm32f1xx_it.c和stm32f10x_it.h</h3><p>stm32f10x_it.c和stm32f10x_it.h一般是存放STM32工程的中断函数的文件。<br>在此我省去了自动生成的大部分程序，仅留下需要我们人为添加的部分<br><strong>stm32f10x_it.c</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Includes ------------------------------------------------------------------*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;main.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f1xx_it.h&quot;</span></span></span><br><span class="line"><span class="comment">/* Private includes ----------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN Includes */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;led.h&quot;</span></span></span><br><span class="line"><span class="comment">/* USER CODE END Includes */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE BEGIN PM */</span></span><br><span class="line"><span class="type">uint16_t</span> TimerCount10ms = <span class="number">0</span>;<span class="comment">//10ms中断计数变量</span></span><br><span class="line"><span class="type">uint16_t</span> TimerCount500ms = <span class="number">0</span>;<span class="comment">//500ms中断计数变量</span></span><br><span class="line"><span class="comment">/* USER CODE END PM */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE BEGIN 1 */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">HAL_TIM_PeriodElapsedCallback</span><span class="params">(TIM_HandleTypeDef *htim)</span><span class="comment">//定时器溢出中断回调函数</span></span><br><span class="line">&#123;<span class="comment">//定时器中断时，每进行完一个中断，并不会立刻退出，而是会进入到中断回调函数中</span></span><br><span class="line">	<span class="keyword">if</span>(htim == &amp;htim6)<span class="comment">//10ms进入一次定时器6的中断</span></span><br><span class="line">	&#123;</span><br><span class="line">		TimerCount10ms=<span class="number">1</span>;<span class="comment">//10ms中断计数变量标志位</span></span><br><span class="line">		TimerCount500ms++;<span class="comment">//每进入一次中断计数加1</span></span><br><span class="line">		<span class="keyword">if</span>(TimerCount500ms%<span class="number">50</span> == <span class="number">0</span>)<span class="comment">//当整除50时进入判断</span></span><br><span class="line">		&#123;</span><br><span class="line">			LED=!LED;<span class="comment">//反转小灯</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* USER CODE END 1 */</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>stm32f10x_it.h</strong><br><strong>extern</strong> 表明变量或者函数是定义在其他其他文件中的。<br>简单理解为：外部调用其他文件中定义的变量即可</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* USER CODE BEGIN EFP */</span></span><br><span class="line"><span class="keyword">extern</span> <span class="type">uint16_t</span> TimerCount10ms;<span class="comment">//10ms中断计数变量</span></span><br><span class="line"><span class="keyword">extern</span> <span class="type">uint16_t</span> TimerCount500ms;<span class="comment">//500ms中断计数变量</span></span><br><span class="line"><span class="comment">/* USER CODE END EFP */</span></span><br></pre></td></tr></table></figure>
<h3 id="4-main-c"><a href="#4-main-c" class="headerlink" title="(4).main.c"></a>(4).main.c</h3><p>在此我省去了自动生成的大部分程序，仅留下需要我们人为添加的部分</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Includes ------------------------------------------------------------------*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;main.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;tim.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;gpio.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private includes ----------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN Includes */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;led.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;sys.h&quot;</span></span></span><br><span class="line"><span class="comment">/* USER CODE END Includes */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private typedef -----------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN PTD */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END PTD */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private define ------------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN PD */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END PD */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private macro -------------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN PM */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END PM */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private variables ---------------------------------------------------------*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE BEGIN PV */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END PV */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private function prototypes -----------------------------------------------*/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">SystemClock_Config</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="comment">/* USER CODE BEGIN PFP */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END PFP */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private user code ---------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN 0 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END 0 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  The application entry point.</span></span><br><span class="line"><span class="comment">  * @retval int</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* USER CODE BEGIN 1 */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* USER CODE END 1 */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* MCU Configuration--------------------------------------------------------*/</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* Reset of all peripherals, Initializes the Flash interface and the Systick. */</span></span><br><span class="line">  HAL_Init();</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* USER CODE BEGIN Init */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* USER CODE END Init */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* Configure the system clock */</span></span><br><span class="line">  SystemClock_Config();</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* USER CODE BEGIN SysInit */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* USER CODE END SysInit */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* Initialize all configured peripherals */</span></span><br><span class="line">  MX_GPIO_Init();</span><br><span class="line">  MX_ADC1_Init();</span><br><span class="line">  MX_TIM6_Init();</span><br><span class="line">  MX_USART1_UART_Init();</span><br><span class="line">  MX_TIM4_Init();</span><br><span class="line">  <span class="comment">/* USER CODE BEGIN 2 */</span></span><br><span class="line">  HAL_TIM_Base_Start_IT(&amp;htim6); <span class="comment">//开启定时器6中断</span></span><br><span class="line">  <span class="comment">/* USER CODE END 2 */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* Infinite loop */</span></span><br><span class="line">  <span class="comment">/* USER CODE BEGIN WHILE */</span></span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">	  <span class="keyword">if</span>(TimerCount10ms==<span class="number">1</span>)<span class="comment">//10ms执行一次</span></span><br><span class="line">	  &#123;</span><br><span class="line">          <span class="comment">//在此处可以放入一些执行函数</span></span><br><span class="line">		  TimerCount10ms=<span class="number">0</span>;<span class="comment">//将标志位置0</span></span><br><span class="line">	  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* USER CODE END 3 */</span></span><br></pre></td></tr></table></figure>
<h1 id="四、演示效果"><a href="#四、演示效果" class="headerlink" title="四、演示效果"></a>四、演示效果</h1><img src="/2025/01/14/GPIO-output/vidio.mp4" class title="vidio.mp4">

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>经过一个充实而忙碌的夜晚，我满怀热情地撰写了一篇关于单片机学习的文章，虽然已尽力详尽，但深知文章中仍不免有诸多省略和未及细讲之处。对于那些在阅读过程中仍感意犹未尽、存有疑问的同学，建议大家不妨拓宽视野，多阅读几篇来自不同作者、风格各异的优秀文章。相信通过多角度、多层次的学习，你们定能集百家之长从而对单片机有更加深入和全面的理解。</p>
<p>在此，我的初衷不仅是为初学者提供一份学习路上的指引，也是对自己学习历程的一次回顾与总结。通过分享，我希望能激发更多人对单片机技术的兴趣，共同探索这片充满挑战与机遇的领域。</p>
<p>为了保持内容的连贯性和避免不必要的重复，我计划在未来的博客中，对于本文中已提及但未深入展开的话题，将通过链接的方式引导大家回到本文进行查阅。同时，我也将不断优化和完善文章内容，力求为大家提供更加准确、全面、易于理解的学习资源。</p>
<p>下期预告——关于GPIO_Input的学习分享。</p>
<p>感谢大家的关注与支持</p>
<hr>
<h1 id="参考文献引用"><a href="#参考文献引用" class="headerlink" title="参考文献引用"></a>参考文献引用</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35157382/article/details/119653413">嵌入式-STM32-GPIO输出和输入的HAL库函数</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44788542/article/details/115303125">GPIO推挽输出和开漏输出模式区别详解</a><br><a target="_blank" rel="noopener" href="https://doc.embedfire.com/mcu/stm32/f103zhinanzhe/std/zh/latest/book/TIM_basic.html">【野火】TIM-基本定时器</a></p>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Your name"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Your name</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Your location</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives/"><p class="title">5</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories/"><p class="title">3</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags/"><p class="title">3</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="me noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/"><span class="level-start"><span class="level-item">张腾跃</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span class="level-start"><span class="level-item">学习笔记</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%A1%AC%E4%BB%B6%E5%BC%80%E5%8F%91/"><span class="level-start"><span class="level-item">硬件开发</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li></ul></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-01-15T07:52:14.000Z">2025-01-15</time></p><p class="title"><a href="/2025/01/15/OLED-IIC/">OLED-IIC</a></p><p class="categories"><a href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/">张腾跃</a> / <a href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a> / <a href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%A1%AC%E4%BB%B6%E5%BC%80%E5%8F%91/">硬件开发</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-01-15T02:56:38.000Z">2025-01-15</time></p><p class="title"><a href="/2025/01/15/External-KEY/">External-KEY</a></p><p class="categories"><a href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/">张腾跃</a> / <a href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a> / <a href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%A1%AC%E4%BB%B6%E5%BC%80%E5%8F%91/">硬件开发</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-01-14T17:36:39.000Z">2025-01-15</time></p><p class="title"><a href="/2025/01/15/GPIO-input/">GPIO-input</a></p><p class="categories"><a href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/">张腾跃</a> / <a href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a> / <a href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%A1%AC%E4%BB%B6%E5%BC%80%E5%8F%91/">硬件开发</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-01-14T14:45:07.000Z">2025-01-14</time></p><p class="title"><a href="/2025/01/14/GPIO-output/">GPIO-output</a></p><p class="categories"><a href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/">张腾跃</a> / <a href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a> / <a href="/categories/%E5%BC%A0%E8%85%BE%E8%B7%83/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%A1%AC%E4%BB%B6%E5%BC%80%E5%8F%91/">硬件开发</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-01-07T15:58:54.459Z">2025-01-07</time></p><p class="title"><a href="/2025/01/07/hello-world/">Hello World</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2025/01/"><span class="level-start"><span class="level-item">January 2025</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/STM32/"><span class="tag">STM32</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"><span class="tag">学习记录</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/"><span class="tag">嵌入式</span><span class="tag">4</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Hexo" height="28"></a><p class="is-size-7"><span>&copy; 2025 John Doe</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script src="/js/pjax.js"></script><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script data-pjax src="/js/insight.js" defer></script><script data-pjax>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>